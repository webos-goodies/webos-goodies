<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="__MSG_title__"
               title_url="__MSG_link__"
			   description="__MSG_description__"
               height="45"
			   author="WebOS Goodies"
			   author_email="support@webos-goodies.jp"
			   author_affiliation="WebOS Goodies"
			   author_location="Tokyo, Japan"
			   author_link="http://webos-goodies.jp/">
    <Locale message="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/google-calculator/ALL_ALL.xml"/>
    <Locale lang="en" message="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/google-calculator/en_ALL.xml"/>
  </ModulePrefs>
  <Content type="html">
    <![CDATA[

<script type="text/javascript">
var mod__MODULE_ID__ = {
receive : function(contents)
{
  var json = eval('(' + contents + ')');
  var answer = json[1][0];
  if(typeof(answer) == "string" && /^=.*/.test(answer))
  {
    _gel('answer__MODULE_ID__').innerHTML = _hesc(answer);
  }
  else
  {
    _gel('answer__MODULE_ID__').innerHTML = "__MSG_na__";
  }
},

calculate : function()
{
  var exp = _gel('expression__MODULE_ID__').value;
  var url = 'http://suggestqueries.google.com/complete/search?output=firefox&hl=ja&qu=' + _esc(exp);
  _IG_FetchContent(url, this.receive);
}

};
</script>

<style>
form#form__MODULE_ID__ {
  width:100%;
  padding:0px;
  margin:0px;
}
#form__MODULE_ID__ table {
  width:100%;
  border:none;
  padding:0px;
  margin:0px;
}
#form__MODULE_ID__ td, #form__MODULE_ID__ tr {
  font-size:12px;
  border:none;
  padding:0px;
  margin:0px;
}
#answer__MODULE_ID__ {
  font-size:14px;
  padding:0px;
  margin:2px 0px 0px 8px;
}
</style>

<form id="form__MODULE_ID__" onsubmit="mod__MODULE_ID__.calculate(); return false;">
<table>
<tr>
<td><input id="expression__MODULE_ID__" type="text" style="width:100%;"/></td>
<td width="1"><input type="submit" value="__MSG_calc__"/></td>
</tr>
</table>
</form>
<div id="answer__MODULE_ID__"></div>

    ]]>
  </Content>
</Module>

