<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
	 title="JavaScript Console"
	 directory_title="JavaScript Console"
	 title_url="http://webos-goodies.jp/"
	 description="__MSG_description__"
	 scrolling="false"
	 height="200"
	 screenshot="__MSG_screenshot__"
	 thumbnail="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/img/thumbnail.png"
	 author="WebOS Goodies"
	 author_email="support@webos-goodies.jp"
	 author_affiliation="WebOS Goodies"
	 author_location="Tokyo, Japan"
	 author_link="http://webos-goodies.jp/">
	<Require feature="setprefs" />
	<Require feature="settitle" />
	<Require feature="dynamic-height" />
	<Require feature="tabs" />
	<Require feature="drag" />
	<Require feature="grid" />
	<Require feature="minimessage" />
	<Require feature="analytics" />
	<Require feature="flash" />
	<Require feature="views" />
	<Require feature="skins" />
	<Require feature="opensocial-0.8" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ALL_ALL.xml" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ja_ALL.xml" lang="ja" />
  </ModulePrefs>
  <UserPref name="pr" datatype="hidden" default_value="1" /><!-- Preference revision -->
  <UserPref name="sm" datatype="hidden" default_value="1" /><!-- Show message about Save Text -->
  <UserPref name="sv" display_name="__MSG_prf_sav__" datatype="bool"   required="true" default_value="0" />
  <UserPref name="fs" display_name="__MSG_prf_fon__" datatype="string" required="true" default_value="12" />
  <UserPref name="tr" display_name="__MSG_prf_txt__" datatype="string" required="true" default_value="15" />
  <UserPref name="or" display_name="__MSG_prf_out__" datatype="string" required="true" default_value="8" />
  <UserPref name="lr" display_name="__MSG_prf_log__" datatype="string" required="true" default_value="8" />
  <UserPref name="gh" display_name="__MSG_prf_gad__" datatype="string" required="true" default_value="200" />
  <UserPref name="u1" display_name="__MSG_prf_usr__ 1" datatype="string" />
  <UserPref name="u2" display_name="__MSG_prf_usr__ 2" datatype="string" />
  <UserPref name="u3" display_name="__MSG_prf_usr__ 3" datatype="string" />
  <UserPref name="u4" display_name="__MSG_prf_usr__ 4" datatype="string" />

  <UserPref name="n000" datatype="hidden" default_value="1" />

  <Content type="html">
	<![CDATA[

<style type="text/css">
  @import url(http://www.google.com/ig/tablib.css);
  .mmlib_table__MODULE_ID__ {
    __MSG_minimessage_style__
    padding:4px;
    margin:0px;
  }
  .mod__MODULE_ID__extraframe {
    border: 1px solid #676767;
    border-top-style: none;
    padding: 4px;
  }
</style>

<div id="mod__MODULE_ID__buttons"></div>
<div id="mod__MODULE_ID__extraview"></div>

<div id="mod__MODULE_ID__gadgetframe" style="display:none;">
  <div id="mod__MODULE_ID__gadgetmsg" style="font-size:__UP_fs__px;">__MSG_msg_gad__</div>
  <div id="mod__MODULE_ID__gadgetborder" style="border:1px dotted #676767;margin:0px auto;overflow:auto;display:none;"></div>
</div>

<div style="font-size:10px;float:right;margin-top:4px;">
  <a target="_blank" href="http://webos-goodies.jp/">__MSG_blog__</a> |
  <a target="_blank" href="http://groups.google.com/group/webos-goodies">__MSG_support__</a>
</div>

<script type="text/javascript">
  // You can get an unpacked version of the following script at http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/script.js
  var Gadget=(function(){var W=document;var E=__MODULE_ID__;var g=new _IG_Prefs(E);var D=!(window.gadgets&&gadgets.views&&gadgets.views.getCurrentView()!==undefined);var U=!D&&!!window.opensocial;var B=1;function Z(l){return l===null}function L(l){return typeof l==="function"}function I(l){return typeof l==="string"}function h(l,m){var n=l[m];return function(){n.apply(l,arguments)}}function Y(l,n){var p=l[n];var m=[];for(var o=2;o<arguments.length;++o){m[m.length]=arguments[o]}return function(){p.apply(l,m)}}function F(l){return W.createElement(l)}function a(){return W.createDocumentFragment()}function k(l){return W.getElementById(l)}function f(m){var l=I(m)?k(m):m;return l.textContent!==undefined?l.textContent:l.innerText}function T(l){l=l.replace(/&/g,"&amp;");l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;");l=l.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");return l}function i(l){return(window.encodeURIComponent?encodeURIComponent(l):escape(l)).replace(/\%20/g,"+")}function b(l){l=l.replace(/\+/g,"%20");return window.decodeURIComponent?decodeURIComponent(l):unescape(l)}function K(){return"JsConsole8395"+B++}function O(m,l){return m.replace(/\$(\d+)/g,function(o,n){return l[parseInt(n,10)]})}function M(){this._nodes={}}M.prototype={getEl:function(l){return this._nodes[l]},getElements:function(){var l={};for(var m in this._nodes){l[m]=this._nodes[m]}return l},build:function(m,l){this._nodes={};if(!l){l=m;m=null}if(!m){m=W.createDocumentFragment()}return this._build(m,l)},_build:function(n,m){if(m instanceof Array){for(var p=0;p<m.length;++p){this._build(n,m[p])}}else{if(m.nodeType){n.appendChild(m)}else{var q=W.createElement(m.tag?m.tag:"DIV");var l=q.setAttribute?true:false,r=null;for(var p in m){if(!m.hasOwnProperty(p)||typeof m[p]=="function"){continue}var o=m[p];switch(p){case"tag":case"html":break;case"cls":q.className=o;break;case"style":this.applyStyles(q,o);break;case"value":q[p]=o;break;case"index":this._nodes[o]=q;break;case"children":case"cn":r=o;break;default:if(l){q.setAttribute(p,o)}else{q[p]=o}break}}if(r){this._build(q,r)}if(m.html){q.innerHTML+=m.html}n.appendChild(q)}}return n},applyStyles:function(m,n){if(typeof n==="string"){m.style.cssText=n}else{for(var l in n){if(typeof n[l]==="string"){m.style[l]=n[l]}}}}};SocialGoodies=(function(){var o=null,r=null,p=[],m=0;var s={fetchPerson:function(v,w){q(w,function(x,y){o.add(o.newFetchPersonRequest(v),x);return{type:"fetchPerson",hasData:true}})},fetchPeople:function(v,w){q(w,function(x,y){o.add(o.newFetchPeopleRequest(l(v)),x);return{type:"fetchPeople",hasData:true}})},storeAppData:function(v,y,x,w){q(w,function(z,AA){o.add(o.newUpdatePersonAppDataRequest(v,y,x),z);return{type:"storeAppData",hasData:false}})},fetchAppData:function(w,v,x){q(x,function(y,z){o.add(o.newFetchPersonAppDataRequest(l(w),v,z.params),y);return{type:"fetchAppData",hasData:true}})},removeAppData:function(w,v,x){q(x,function(y,z){o.add(o.newRemovePersonAppDataRequest(w,v),y);return{type:"removeAppData",hasData:false}})},send:function(){clearTimeout(r);r=null;u()},Error:function(y,x,w){var v=this;v.getErrorCode=function(){return y||x};v.getErrorMessage=function(){return x||y};v.isBatchLevelError=function(){return w}}};function q(y,x){y=y||{};n();var z={};if(y.escape=="none"){z[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]=opensocial.EscapeType.NONE}y.params=z;var w=t();var v=x(w,y||{});v.key=w;v.callback=y.callback;v.scope=y.scope;p.push(v)}function t(){return"uniqueKey"+m++}function n(){if(!o){o=opensocial.newDataRequest()}if(r===null){r=setTimeout(u,0)}}function l(v){if(typeof v=="string"){if(/^(.+)_FRIENDS$/.exec(v)){v=opensocial.newIdSpec({userId:RegExp.$1,groupId:"FRIENDS"})}else{v=opensocial.newIdSpec({userId:v,groupId:"SELF"})}}return v}function u(){var w=o,v=p;r=null;o=null;p=[];if(v.length>0){w.send(function(z){if(!z.hadError()){for(var AB=0,y=v.length;AB<y;++AB){var x=v[AB];if(typeof x.callback=="function"){var AC=z.get(x.key),AD=null,AA=null;if(!AC||AC.hadError()){AA=new s.Error(AC.getErrorCode(),AC.getErrorMessage(),false)}else{if(x.hasData){AD=AC.getData()}}x.callback.call(x.scope,AD,AA)}}}else{var AA=new s.Error("",z.getErrorMessage(),true);for(var AB=0,y=v.length;AB<y;++AB){var x=v[AB];if(typeof z.callback=="function"){x.callback.call(x.scope,null,AA)}}}})}}return{DataRequest:s}})();function j(m,l){this.$callback=m;this.$interval=l;this.$timerId=null}j.prototype={invoke:function(){var l=this;if(Z(l.$timerId)){clearTimeout(l.$timerId)}l.$timerId=setTimeout(l.$callback,l.$interval)}};var X=(function(){var n=0,p=null,l=null;function o(r){return document.createElement(r)}function m(r){r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;");r=r.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var s=o("div");s.innerHTML="<pre>"+r+"</pre>";return s.textContent!==undefined?s.textContent:s.innerText}function q(w,x){if(!(this instanceof q)){return new q(w,x)}var AB=this;x=x||{};var s=x.previewName||"gadgetPreview"+n++,y=x.title||"no title",AC=parseInt(x.width||320,10),t=parseInt(x.height||200,10),z=y,u=AC,AA=t,v=x.border?1:0;if(!p){var r=o("DIV");l=l||o("TEXTAREA");p=o("FORM");l.name="rawxml";p.method="POST";r.style.display="none";p.appendChild(l);r.appendChild(p);document.body.appendChild(r)}AB.update=function(AE){var AD=this;var AF=AE.substring(0,AE.search(/<(?:UserPref|Content)/));z=AF.match(/title="([^\u0022]*)"/)?m(RegExp.$1):y;u=AF.match(/width="(\d+)"/)?parseInt(RegExp.$1,10):AC;AA=AF.match(/height="(\d+)"/)?parseInt(RegExp.$1,10):t;try{delete window.frames[s]}catch(AG){}document.getElementById(w).innerHTML=['<iframe id="'+s+'" name="'+s+'"','src="about:blank" frameborder='+v,"width="+u,"height="+AA,,"></iframe>"].join(" ");l.value=AE;p.action=["http://www.gmodules.com/ig/ifr?","title="+(window.encodeURIComponent?encodeURIComponent:escape)(z).replace(/%20/g,"+"),"w="+u,"h="+AA,"synd=open","nocache=1","output=html"].join("&");p.target=s;p.submit()};AB.getPreviewName=function(){return s};AB.getTitle=function(){return z};AB.getWidth=function(){return u};AB.getHeight=function(){return AA};AB.getDefaultTitle=function(){return y};AB.getDefaultWidth=function(){return AC};AB.getDefaultHeight=function(){return t};AB=null}return q})();function c(n){var m=this,r=F("div"),l=K(),q=K(),p="text"+n,o=('<textarea id="$0" wrap="off" style="width:100%; height:$1em; font-size:$2px;"></textarea>');r.id=l;r.innerHTML=O(o,[q,g.getInt("tr"),g.getInt("fs")]);r.style.display="none";W.body.appendChild(r);m.$getId=function(){return l};m.$getTitle=function(){return""+n};m.$getContent=function(){return k(q).value};m.$setContent=function(s){k(q).value=s};m.$save=function(){A.storageSetData(p,k(q).value)};m.$load=function(){A.storageGetData(p,this,function(s,t){if(t){this.$setContent(t)}})};k(q).onchange=Y(m,"$save");m=r=null}function e(){this.$tabs=new _IG_Tabs(A.getModuleId());this.$panels=[];for(var o=1;o<=5;++o){this.$panels.push(new c(o))}this.$tabs.alignTabs("left");for(var o=1,n=this.$panels.length;o<=n;++o){var m=this.$panels[o-1];this.$tabs.addTab(m.$getTitle(),{contentContainer:k(m.$getId())})}this.onStorageReady()}e.prototype={$getPanel:function(l){return this.$panels[parseInt(l,10)-1]},$getCurrentIndex:function(){return this.$tabs.getSelectedTab().getIndex()+1},$saveText:function(m){var l=this.$getPanel(m);l&&l.$save()},onStorageReady:function(){if(A.storageIsOk()){for(var n=0,m=this.$panels.length;n<m;++n){this.$panels[n].$load()}}},getText:function(m){var l=this.$getPanel(m);return(l&&l.$getContent())||""},getCurrentText:function(){return this.getText(this.$getCurrentIndex())},setCurrentText:function(m){var l=this.$getPanel(this.$getCurrentIndex());if(l){l.$setContent(m);l.$save()}},clearCurrentText:function(){this.setCurrentText("")}};function G(){this.$frame=F("DIV");this.$frame.id=A.generateId();this.$frame.className=A.getPrefix("extraframe");this.setText()}G.prototype={getTabLabel:function(){return A.getMsg("tab_out")},getContent:function(){return this.$frame},setText:function(o,l){var n=typeof o==="undefined"?A.getMsg("msg_out"):T(String(o));var m="margin:0px; padding:0px; overflow:auto;font-size:"+parseInt(A.getPrefValue("fontSize"),10)+"px;max-height:"+parseInt(A.getPrefValue("maxOutputRows"),10)+"em;";if(l){m+="background-color:#ffaaaa"}this.$frame.innerHTML='<pre style="'+m+'">'+n+"</pre>"}};function H(){this.$doms=null;var l=new M();var m="width:100%;height:"+parseInt(A.getPrefValue("logRows"),10)+"em;font-size:"+parseInt(A.getPrefValue("fontSize"),10)+"px;";l.build({tag:"DIV",index:"frame",id:A.generateId(),cn:[{tag:"DIV",cn:{tag:"TEXTAREA",index:"log",style:m,wrap:"off",readonly:"true"}},{tag:"DIV",style:{textAlign:"right",marginTop:"4px"},cn:{tag:"INPUT",index:"clr",type:"button",value:A.getMsg("btn_clr")}}]});this.$doms=l.getElements();this.$doms.log.value=A.getMsg("msg_log");this.$doms.clr.onclick=h(this,"$onClear")}H.prototype={$onClear:function(){this.$doms.log.value=""},getTabLabel:function(){return A.getMsg("tab_log")},getContent:function(){return this.$doms.frame},log:function(l){this.$doms.log.value+=l}};function V(){this.$frame=F("DIV");this.$frame.id=A.generateId();this.$frame.className=A.getPrefix("extraframe");this.setHTML()}V.prototype={getTabLabel:function(){return A.getMsg("tab_htm")},getContent:function(){return this.$frame},setHTML:function(l){if(typeof l==="undefined"){var m="font-size:"+parseInt(A.getPrefValue("fontSize"),10)+"px;";this.$frame.innerHTML='<div style="'+m+'">'+A.getMsg("msg_htm")+"</div>"}else{this.$frame.innerHTML=String(l)}}};function Q(){this.$doms=null;this.$tabs=null;this.$settingDoms=null;this.$previewDoms=null;this.$sourceDoms=null;this.$gadget=null;var l=new M();l.build({tag:"DIV",index:"frame",id:A.generateId(),cls:A.getPrefix("extraframe"),style:{display:"none"},cn:[{tag:"DIV",index:"tabs"},{tag:"DIV",style:{margin:"4px 0px",textAlign:"right"},cn:[{tag:"INPUT",index:"generate",type:"button",value:A.getMsg("btn_gad")}]}]});this.$doms=l.getElements();this.$tabs=new _IG_Tabs(A.getModuleId(),0,this.$doms.tabs);this.$tabs.alignTabs("left");this.$initSettingTab();this.$initPreviewTab();this.$initSourceTab();this.$doms.generate.onclick=h(this,"$onGenerate")}Q.prototype={$initSettingTab:function(){var n="width:98%;margin:0px;";var m="width:10%; text-align:right; font-size:12px; overflow:hidden;";var o="width:89%;";var l="width:39%;";var q="width:100%;font-size:12px;";var r="width:100%;font-size:12px;";var p=new M();p.build({tag:"DIV",index:"frame",cn:{tag:"TABLE",style:n,cn:{tag:"TBODY",cn:[{tag:"TR",cn:[{tag:"TD",style:m,html:A.getMsg("gad_ttl")},{tag:"TD",colSpan:"3",style:o,cn:{tag:"INPUT",index:"title",type:"text",style:q}}]},{tag:"TR",cn:[{tag:"TD",style:m,html:A.getMsg("gad_wdt")},{tag:"TD",style:l,cn:{tag:"INPUT",index:"width",type:"text",style:q}},{tag:"TD",style:m,html:A.getMsg("gad_hgt")},{tag:"TD",style:l,cn:{tag:"INPUT",index:"height",type:"text",style:q}}]},{tag:"TR",cn:[{tag:"TD",style:m,html:A.getMsg("gad_htm")},{tag:"TD",style:l,cn:{tag:"SELECT",index:"html",style:r,cn:[{tag:"OPTION",value:"1",html:A.getMsg("tab")+" 1"},{tag:"OPTION",value:"2",html:A.getMsg("tab")+" 2"},{tag:"OPTION",value:"3",html:A.getMsg("tab")+" 3"},{tag:"OPTION",value:"4",html:A.getMsg("tab")+" 4"},{tag:"OPTION",value:"5",html:A.getMsg("tab")+" 5"}]}},{tag:"TD",style:m,html:A.getMsg("gad_scp")},{tag:"TD",style:l,cn:{tag:"SELECT",index:"script",style:r,cn:[{tag:"OPTION",value:"0",html:"----"},{tag:"OPTION",value:"1",html:A.getMsg("tab")+" 1"},{tag:"OPTION",value:"2",html:A.getMsg("tab")+" 2"},{tag:"OPTION",value:"3",html:A.getMsg("tab")+" 3"},{tag:"OPTION",value:"4",html:A.getMsg("tab")+" 4"},{tag:"OPTION",value:"5",html:A.getMsg("tab")+" 5"}]}}]}]}}});this.$settingDoms=p.getElements();this.$tabs.addTab(A.getMsg("tab_set"),{contentContainer:this.$settingDoms.frame,callback:h(this,"$onChangeTab")})},$initPreviewTab:function(){this.$previewDoms={frame:_gel(A.getPrefix("gadgetframe")),msg:_gel(A.getPrefix("gadgetmsg")),border:_gel(A.getPrefix("gadgetborder"))};this.$tabs.addTab(A.getMsg("tab_prv"),{contentContainer:this.$previewDoms.frame,callback:h(this,"$onChangeTab")});this.$gadget=new X(this.$previewDoms.border.id,{height:parseInt(A.getPrefValue("maxGadgetHeight"),10)})},$initSourceTab:function(){var m={width:"100%",height:"10em",fontSize:parseInt(A.getPrefValue("fontSize"),10)+"px"};var l=new M();l.build({tag:"DIV",index:"frame",cn:{tag:"TEXTAREA",index:"source",style:m,readonly:"true"}});this.$sourceDoms=l.getElements();this.$tabs.addTab(A.getMsg("tab_src"),{contentContainer:this.$sourceDoms.frame,callback:h(this,"$onChangeTab")})},$onGenerate:function(){var q=this.$settingDoms.title.value;var o=parseInt(this.$settingDoms.width.value,10);var l=parseInt(this.$settingDoms.height.value,10);var n=A.getText(this.$settingDoms.html.value);var m=A.getText(this.$settingDoms.script.value);if(q){q='\n      title="'+T(q)+'"'}else{q=""}if(o){o='\n      width="'+o+'"'}else{o=""}if(l){l='\n      height="'+l+'"'}else{l=""}if(m){m='\u003cscript type="text/javascript"\u003e\n'+m+"\n\u003c/script\u003e"}var p=['<?xml version="1.0" encoding="UTF-8" ?>',"<Module>","  <ModulePrefs"+q+o+l+">",'    <Require feature="setprefs" />','    <Require feature="settitle" />','    <Require feature="dynamic-height" />','    <Require feature="tabs" />','    <Require feature="drag" />','    <Require feature="grid" />','    <Require feature="minimessage" />','    <Require feature="analytics" />','    <Require feature="flash" />',"  </ModulePrefs>",'  <Content type="html">',"    \u003c![CDATA[",n,m,"    ]]\u003e","  </Content>","</Module>"].join("\n");this.$sourceDoms.source.value=p;this.$previewDoms.msg.style.display="none";this.$previewDoms.border.style.display="block";this.$gadget.update(p);this.$centeringPreview();A.adjustHeight()},$onChangeTab:function(l){if(this.$previewDoms&&this.$previewDoms.frame.id==l){this.$centeringPreview()}A.adjustHeight()},$centeringPreview:function(){var l=this.$previewDoms.border;var n=l.parentNode.offsetWidth;var m=this.$gadget.getDefaultHeight();if(n>0){l.style.width=(_min(n,this.$gadget.getWidth())+2)+"px";l.style.height=(_min(m,this.$gadget.getHeight())+2)+"px"}},getTabLabel:function(){return A.getMsg("tab_gad")},getContent:function(){return this.$doms.frame}};function R(){A.setCurrentText(T(A.getCurrentText()))}function S(){var l=A.getCurrentText();l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;");l=l.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var m=F("div");m.innerHTML="<pre>"+l+"</pre>";A.setCurrentText(f(m))}function N(){A.setCurrentText(i(A.getCurrentText()))}function C(){A.setCurrentText(b(A.getCurrentText()))}function J(m){var l=new M();l.build(m,[{tag:"DIV",index:"msg",html:A.getMsg("tol_bkm")},{tag:"DIV",index:"result",style:{display:"none"},cn:[{tag:"DIV",cn:{tag:"A",index:"link",html:A.getMsg("tol_bkc")}},{tag:"DIV",style:{marginTop:"4px"},cn:[{tag:"DIV",html:A.getMsg("tol_src")},{tag:"TEXTAREA",index:"source",style:{width:"100%",height:"5em"},readonly:"true",wrap:"soft"}]}]}]);this.$doms=l.getElements();this.$pattern=new RegExp(["//.*","/\\*(?:[^*]|\\*(?!/))+\\*/","('|\")(?:[^\\\\\\1]|\\\\.)*?\\1","([^.)\\]$\\w\\s]\\s*)(/(?![/\\*])(?:[^\\\\/\\[]|\\\\.|\\[(?:[^\\\\\\]]|\\\\.)*\\])*?/)"].join("|"),"g")}J.prototype={onExecute:function(){var m=A.getCurrentText();var l=[];m=m.replace(/\r\n?/g,"\n");m=m.replace(/\~/g,"~T");m=m.replace(/\+\+/g,"~P");m=m.replace(/\-\-/g,"~M");m=m.replace(this.$pattern,function(q,p,o,n){if(p){l[l.length]=q;return"~S"}else{if(o&&n){l[l.length]=n;return o+"~S"}else{return""}}});m=m.replace(/\s+/g," ");m=m.replace(/^ +| +$/g,"");m=m.replace(/\~S/g,function(){return l.shift()});m=m.replace(/\~P/g,"++").replace(/\~M/g,"--").replace(/\~T/g,"~");this.$doms.link.href="javascript:(function(){"+m+"})()";this.$doms.source.value=m;this.$doms.msg.style.display="none";this.$doms.result.style.display="block";A.adjustHeight()}};function d(){this.$doms=null;this.$entries=[];var m=[];for(var n=0;n<d.$template.length;++n){var o=d.$template[n];m[n]={tag:"OPTION",value:n,html:A.getMsg(o.label)};var p={};if(L(o.cls)){var q=F("DIV");q.style.display="none";q.style.fontSize=A.getPrefValue("fontSize")+"px";q.style.marginTop="4px";p.scope=new o.cls(q);p.func=p.scope.onExecute;p.frame=q}else{if(L(o.func)){p.scope=window;p.func=o.func}}this.$entries[n]=p}var l=new M();l.build({tag:"DIV",index:"frame",id:A.generateId(),cls:A.getPrefix("extraframe"),cn:[{tag:"DIV",cn:[{tag:"SELECT",index:"select",cn:m},{tag:"INPUT",index:"execute",type:"button",value:A.getMsg("tol_exe"),style:{marginLeft:"8px"}}]},{tag:"DIV",index:"content"}]});this.$doms=l.getElements();this.$doms.execute.onclick=h(this,"$onExecute");this.$doms.select.onchange=h(this,"$onChange");for(var n=0;n<this.$entries.length;++n){if(this.$entries[n].frame){this.$doms.content.appendChild(this.$entries[n].frame)}}}d.$template=[{label:"tol_hes",func:R},{label:"tol_hue",func:S},{label:"tol_ues",func:N},{label:"tol_uue",func:C},{label:"tol_bkl",cls:J}];d.prototype={$onExecute:function(){var m=parseInt(this.$doms.select.value,10);if(0<=m&&m<this.$entries.length){var l=this.$entries[m];if(typeof l.func==="function"){l.func.call(l.scope)}}},$onChange:function(){var m=parseInt(this.$doms.select.value,10);for(var l=0;l<this.$entries.length;++l){if(this.$entries[l].frame){this.$entries[l].frame.style.display=(l==m?"block":"none")}}A.adjustHeight()},getTabLabel:function(){return A.getMsg("tab_tol")},getContent:function(){return this.$doms.frame}};function P(){this.$prefix="\n----\n"}P.prototype={log:function(l){A.log(this.$prefix+l);this.$prefix=""},getPrefs:function(){return A.getPrefs()}};var A={$nextId:0,$prefs:g,$prefix:"mod"+E,$flash:null,$storageId:"mod"+E+"JsConsoleStorage",$storageHdl:null,$storage:{},$textView:null,$extraTabs:null,$outputView:null,$logView:null,$htmlView:null,$gadgetView:null,$toolsView:null,$minimsg:null,$prefsMap:{prefsVer:"pr",fontSize:"fs",textRows:"tr",maxOutputRows:"or",logRows:"lr",maxGadgetHeight:"gh",saveText:"sv"},init:function(){this.$textView=new e();this.$minimsg=new _IG_MiniMessage(E);this.$storageHdl=new j(Y(this,"onStorageFlush"),3000);if(this.$prefs.getBool("sv")&&!U){if(this.$prefs.getBool("sm")){var o=this.getMsg("msg_sav").replace(/_\_MODULE_ID__/,E).replace(/^\s+|\s+$/,"");this.$minimsg.createDismissibleMessage(o,h(this,"$onSaveWarningDismissed"))}}else{if(!this.$prefs.getBool("sm")){this.$prefs.set("sm",1)}}if(/synd=ig/.test(W.location)){for(var n=0;n<=0;++n){var m=this.$prefs;var l=("00"+n).substr(-3);var o=(this.getMsg("notification"+l)||"").replace(/_\_MODULE_ID__/,E);if(o&&m.getBool("n"+l)){this.$minimsg.createDismissibleMessage(o,function(){m.set("n"+l,"0");setTimeout(function(){_IG_AdjustIFrameHeight()},0);return true})}}}this.$initExtraViews();this.$initButtons();this.adjustHeight()},$initButtons:function(){var n=this;var m=new M();var l=k(n.$prefix+"buttons");l.style.margin="4px 0px";var o={marginRight:"8px"};m.build(l,[{tag:"DIV",style:"float:right",cn:[{tag:"INPUT",index:"clr",type:"button",value:n.getMsg("btn_clr")}]},{tag:"DIV",cn:[{tag:"INPUT",index:"run",type:"button",value:n.getMsg("btn_run"),style:o},{tag:"INPUT",index:"htm",type:"button",value:n.getMsg("btn_htm"),style:o}]}]);m.getEl("run").onclick=h(n,"$onRunAsScript");m.getEl("htm").onclick=h(n,"$onReplaceHTML");m.getEl("clr").onclick=h(n,"$onClearText")},$initExtraViews:function(){this.$extraTabs=new _IG_Tabs(E,0,k(this.$prefix+"extraview"));this.$outputView=new G();this.$logView=new H();this.$htmlView=new V();this.$gadgetView=new Q();this.$toolsView=new d();this.$extraTabs.alignTabs("left");var m=[this.$outputView,this.$logView,this.$htmlView,this.$gadgetView,this.$toolsView];for(var o=0;o<m.length;++o){var l=m[o];var n=l.getTabLabel();var p=l.getContent();var q=h(this,"$onChangeTab");this.$extraTabs.addTab(n,{contentContainer:p,callback:q})}},$onRunAsScript:function(){var o=this.$textView.getCurrentText();var l="";var m=false;try{l=(function(){window.jsconsole=new P();return this.$eval(o)}).call(this)}catch(n){l=n.message||n.description||String(n);m=true}this.$outputView.setText(l,m);this.adjustHeight()},$onClearText:function(){this.$textView.clearCurrentText()},$onReplaceHTML:function(){var l=this.$textView.getCurrentText();if(l){this.$htmlView.setHTML(l);this.adjustHeight()}},$onChangeTab:function(){this.adjustHeight()},$onSaveWarningDismissed:function(){this.$prefs.set("sm",0);A.adjustHeight();return true},adjustHeight:function(){_IG_AdjustIFrameHeight()},generateId:function(){return this.$prefix+"generatedId"+this.$nextId++},getModuleId:function(){return E},getPrefix:function(l){return this.$prefix+l},getPrefs:function(){return this.$prefs},getPrefValue:function(l){return this.$prefs.getString(this.$prefsMap[l]||l)},getPrefBool:function(l){return this.$prefs.getBool(this.$prefsMap[l]||l)},getMsg:function(l){return this.$prefs.getMsg(l)},getText:function(l){return this.$textView.getText(l)},getCurrentText:function(){return this.$textView.getCurrentText()},setCurrentText:function(l){this.$textView.setCurrentText(l)},log:function(l){this.$logView.log(l)},onStorageReady:function(){if(!U){this.$flash=k(A.getPrefix("JsConsoleStorage"));this.$flash.open(this.$storageId);if(this.$textView){this.$textView.onStorageReady()}}},onStorageFlush:function(){if(U){var m=this.$storage;for(var l in m){SocialGoodies.DataRequest.storeAppData("VIEWER",l,m[l])}}else{if(this.$flash){this.$flash.flush()}}},storageSetData:function(l,m){if(U){this.$storage[l]=m;this.$storageHdl.invoke()}else{if(this.$flash){this.$flash.setData(l,m);this.$storageHdl.invoke()}}},storageGetData:function(l,m,n){if(U){SocialGoodies.DataRequest.fetchAppData("VIEWER",l,{escape:"none",callback:function(p){for(var o in p){n.call(m,l,p[o][l]);break}}})}else{if(this.$flash){n.call(m,l,this.$flash.getData(l))}}},storageIsOk:function(){return this.$flash?this.$flash.isOk():U},useLegacy:D,useOpenSocial:U};if(window.Components){A.init()}else{_IG_RegisterOnloadHandler(function(){A.init()})}return A})();Gadget.$eval=function(text){return eval(text)};</script>

<div>
  <script type="text/javascript">
    if(Gadget.getPrefBool('saveText') && !Gadget.useOpenSocial)
    {
      document.open();
      if(window.ActiveXObject)
      {
        document.write([
          '<object id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage' + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="10" height="10">',
          '    <param name="src" value="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '" />',
          '    <param name="flashVars" value="prefix=' + 'Gadget.onStorage' + '" />',
          '</object>'].join('\n'));
      }
      else
      {
        document.write([
          '<embed',
          '    id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage"',
          '    src="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '"',
          '    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"',
          '    width="10" height="10"',
          '    flashVars="prefix=' + 'Gadget.onStorage"'].join('\n'));
      }
      document.close();
    }
  </script>
</div>

<div style="clear:both;"></div>

    ]]>
  </Content>
</Module>
