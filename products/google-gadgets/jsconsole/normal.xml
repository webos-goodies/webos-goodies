<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
	 title="JavaScript Console"
	 directory_title="JavaScript Console"
	 title_url="http://webos-goodies.jp/"
	 description="__MSG_description__"
	 scrolling="false"
	 height="200"
	 screenshot="__MSG_screenshot__"
	 thumbnail="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/img/thumbnail.png"
	 author="WebOS Goodies"
	 author_email="support@webos-goodies.jp"
	 author_affiliation="WebOS Goodies"
	 author_location="Tokyo, Japan"
	 author_link="http://webos-goodies.jp/">
	<Require feature="setprefs" />
	<Require feature="settitle" />
	<Require feature="dynamic-height" />
	<Require feature="tabs" />
	<Require feature="drag" />
	<Require feature="grid" />
	<Require feature="minimessage" />
	<Require feature="analytics" />
	<Require feature="flash" />
	<Require feature="views" />
	<Require feature="skins" />
	<Require feature="opensocial-0.8" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ALL_ALL.xml" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ja_ALL.xml" lang="ja" />
  </ModulePrefs>
  <UserPref name="pr" datatype="hidden" default_value="1" /><!-- Preference revision -->
  <UserPref name="sm" datatype="hidden" default_value="1" /><!-- Show message about Save Text -->
  <UserPref name="sv" display_name="__MSG_prf_sav__" datatype="bool"   required="true" default_value="0" />
  <UserPref name="fs" display_name="__MSG_prf_fon__" datatype="string" required="true" default_value="12" />
  <UserPref name="tr" display_name="__MSG_prf_txt__" datatype="string" required="true" default_value="15" />
  <UserPref name="or" display_name="__MSG_prf_out__" datatype="string" required="true" default_value="8" />
  <UserPref name="lr" display_name="__MSG_prf_log__" datatype="string" required="true" default_value="8" />
  <UserPref name="gh" display_name="__MSG_prf_gad__" datatype="string" required="true" default_value="200" />
  <UserPref name="u1" display_name="__MSG_prf_usr__ 1" datatype="string" />
  <UserPref name="u2" display_name="__MSG_prf_usr__ 2" datatype="string" />
  <UserPref name="u3" display_name="__MSG_prf_usr__ 3" datatype="string" />
  <UserPref name="u4" display_name="__MSG_prf_usr__ 4" datatype="string" />

  <UserPref name="n000" datatype="hidden" default_value="1" />

  <Content type="html">
	<![CDATA[

<style type="text/css">
  @import url(http://www.google.com/ig/tablib.css);
  .mmlib_table__MODULE_ID__ {
    __MSG_minimessage_style__
    padding:4px;
    margin:0px;
  }
  .mod__MODULE_ID__extraframe {
    border: 1px solid #676767;
    border-top-style: none;
    padding: 4px;
  }
</style>

<div id="mod__MODULE_ID__buttons"></div>
<div id="mod__MODULE_ID__extraview"></div>

<div id="mod__MODULE_ID__gadgetframe" style="display:none;">
  <div id="mod__MODULE_ID__gadgetmsg" style="font-size:__UP_fs__px;">__MSG_msg_gad__</div>
  <div id="mod__MODULE_ID__gadgetborder" style="border:1px dotted #676767;margin:0px auto;overflow:auto;display:none;"></div>
</div>

<div style="font-size:10px;float:right;margin-top:4px;">
  <a target="_blank" href="http://webos-goodies.jp/">__MSG_blog__</a> |
  <a target="_blank" href="http://groups.google.com/group/webos-goodies">__MSG_support__</a>
</div>

<script type="text/javascript">
  // You can get an unpacked version of the following script at http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/script.js
  var Gadget=(function(){var Z=__MODULE_ID__;var X=!(window.gadgets&&gadgets.views&&gadgets.views.getCurrentView()!==undefined);var D=!X&&!!window.opensocial;function R(f){return f===null}function C(f){return typeof f==="function"}function K(f){return typeof f==="string"}function A(f,g){var h=f[g];return function(){h.apply(f,arguments)}}function V(f,h){var k=f[h];var g=[];for(var j=2;j<arguments.length;++j){g[g.length]=arguments[j]}return function(){k.apply(f,g)}}function c(f){return document.createElement(f)}function I(){return document.createDocumentFragment()}function E(f){return document.getElementById(f)}function a(g){var f=K(g)?E(g):g;return f.textContent!==undefined?f.textContent:f.innerText}function P(f){f=f.replace(/&/g,"&amp;");f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;");f=f.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");return f}function S(f){return(window.encodeURIComponent?encodeURIComponent(f):escape(f)).replace(/\%20/g,"+")}function N(f){f=f.replace(/\+/g,"%20");return window.decodeURIComponent?decodeURIComponent(f):unescape(f)}function b(){this._nodes={}}b.prototype={getEl:function(f){return this._nodes[f]},getElements:function(){var f={};for(var g in this._nodes){f[g]=this._nodes[g]}return f},build:function(g,f){this._nodes={};if(!f){f=g;g=null}if(!g){g=document.createDocumentFragment()}return this._build(g,f)},_build:function(h,g){if(g instanceof Array){for(var k=0;k<g.length;++k){this._build(h,g[k])}}else{if(g.nodeType){h.appendChild(g)}else{var l=document.createElement(g.tag?g.tag:"DIV");var f=l.setAttribute?true:false,m=null;for(var k in g){if(!g.hasOwnProperty(k)||typeof g[k]=="function"){continue}var j=g[k];switch(k){case"tag":case"html":break;case"cls":l.className=j;break;case"style":this.applyStyles(l,j);break;case"value":l[k]=j;break;case"index":this._nodes[j]=l;break;case"children":case"cn":m=j;break;default:if(f){l.setAttribute(k,j)}else{l[k]=j}break}}if(m){this._build(l,m)}if(g.html){l.innerHTML+=g.html}h.appendChild(l)}}return h},applyStyles:function(g,h){if(typeof h==="string"){g.style.cssText=h}else{for(var f in h){if(typeof h[f]==="string"){g.style[f]=h[f]}}}}};SocialGoodies=(function(){var i=null,l=null,j=[],g=0;var m={fetchPerson:function(p,q){k(q,function(r,s){i.add(i.newFetchPersonRequest(p),r);return{type:"fetchPerson",hasData:true}})},fetchPeople:function(p,q){k(q,function(r,s){i.add(i.newFetchPeopleRequest(f(p)),r);return{type:"fetchPeople",hasData:true}})},storeAppData:function(p,s,r,q){k(q,function(t,u){i.add(i.newUpdatePersonAppDataRequest(p,s,r),t);return{type:"storeAppData",hasData:false}})},fetchAppData:function(q,p,r){k(r,function(s,t){i.add(i.newFetchPersonAppDataRequest(f(q),p,t.params),s);return{type:"fetchAppData",hasData:true}})},removeAppData:function(q,p,r){k(r,function(s,t){i.add(i.newRemovePersonAppDataRequest(q,p),s);return{type:"removeAppData",hasData:false}})},send:function(){clearTimeout(l);l=null;o()},Error:function(s,r,q){var p=this;p.getErrorCode=function(){return s||r};p.getErrorMessage=function(){return r||s};p.isBatchLevelError=function(){return q}}};function k(s,r){s=s||{};h();var t={};if(s.escape=="none"){t[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]=opensocial.EscapeType.NONE}s.params=t;var q=n();var p=r(q,s||{});p.key=q;p.callback=s.callback;p.scope=s.scope;j.push(p)}function n(){return"uniqueKey"+g++}function h(){if(!i){i=opensocial.newDataRequest()}if(l===null){l=setTimeout(o,0)}}function f(p){if(typeof p=="string"){if(/^(.+)_FRIENDS$/.exec(p)){p=opensocial.newIdSpec({userId:RegExp.$1,groupId:"FRIENDS"})}else{p=opensocial.newIdSpec({userId:p,groupId:"SELF"})}}return p}function o(){var q=i,p=j;l=null;i=null;j=[];if(p.length>0){q.send(function(t){if(!t.hadError()){for(var v=0,s=p.length;v<s;++v){var r=p[v];if(typeof r.callback=="function"){var w=t.get(r.key),x=null,u=null;if(!w||w.hadError()){u=new m.Error(w.getErrorCode(),w.getErrorMessage(),false)}else{if(r.hasData){x=w.getData()}}r.callback.call(r.scope,x,u)}}}else{var u=new m.Error("",t.getErrorMessage(),true);for(var v=0,s=p.length;v<s;++v){var r=p[v];if(typeof t.callback=="function"){r.callback.call(r.scope,null,u)}}}})}}return{DataRequest:m}})();function W(g,f){this.$callback=g;this.$interval=f;this.$timerId=null}W.prototype={invoke:function(){var f=this;if(R(f.$timerId)){clearTimeout(f.$timerId)}f.$timerId=setTimeout(f.$callback,f.$interval)}};var J=(function(){var h=0,j=null,f=null;function i(l){return document.createElement(l)}function g(l){l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;");l=l.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var m=i("div");m.innerHTML="<pre>"+l+"</pre>";return m.textContent!==undefined?m.textContent:m.innerText}function k(q,r){if(!(this instanceof k)){return new k(q,r)}var v=this;r=r||{};var m=r.previewName||"gadgetPreview"+h++,s=r.title||"no title",w=parseInt(r.width||320,10),n=parseInt(r.height||200,10),t=s,o=w,u=n,p=r.border?1:0;if(!j){var l=i("DIV");f=f||i("TEXTAREA");j=i("FORM");f.name="rawxml";j.method="POST";l.style.display="none";j.appendChild(f);l.appendChild(j);document.body.appendChild(l)}v.update=function(y){var x=this;var z=y.substring(0,y.search(/<(?:UserPref|Content)/));t=z.match(/title="([^\u0022]*)"/)?g(RegExp.$1):s;o=z.match(/width="(\d+)"/)?parseInt(RegExp.$1,10):w;u=z.match(/height="(\d+)"/)?parseInt(RegExp.$1,10):n;try{delete window.frames[m]}catch(AA){}document.getElementById(q).innerHTML=['<iframe id="'+m+'" name="'+m+'"','src="about:blank" frameborder='+p,"width="+o,"height="+u,,"></iframe>"].join(" ");f.value=y;j.action=["http://www.gmodules.com/ig/ifr?","title="+(window.encodeURIComponent?encodeURIComponent:escape)(t).replace(/%20/g,"+"),"w="+o,"h="+u,"synd=open","nocache=1","output=html"].join("&");j.target=m;j.submit()};v.getPreviewName=function(){return m};v.getTitle=function(){return t};v.getWidth=function(){return o};v.getHeight=function(){return u};v.getDefaultTitle=function(){return s};v.getDefaultWidth=function(){return w};v.getDefaultHeight=function(){return n};v=null}return k})();function L(){this.$tabs=new _IG_Tabs(U.getModuleId());this.$numTexts=5;this.$doms=null;var f=[];var k="width:100%;height:"+parseInt(U.getPrefValue("textRows"),10)+"em;font-size:"+parseInt(U.getPrefValue("fontSize"),10)+"px;";for(var h=1;h<=this.$numTexts;++h){f.push({tag:"DIV",index:"tab"+h,id:U.generateId(),cn:[{tag:"TEXTAREA",index:"text"+h,id:U.generateId(),wrap:"off",style:k}]})}var g=new b();g.build(f);this.$doms=g.getElements();this.$tabs.alignTabs("left");for(var h=1;h<=this.$numTexts;++h){var j=this.$doms["text"+h];j.onchange=V(this,"$onChange",h);this.$tabs.addTab(h,{contentContainer:this.$doms["tab"+h]})}this.onStorageReady()}L.prototype={$getContent:function(f){var g=parseInt(f,10);return(0<g&&g<=this.$numTexts)?this.$doms["text"+g]:null},$getCurrentIndex:function(){return this.$tabs.getSelectedTab().getIndex()+1},$onChange:function(f){this.$saveText(f)},$saveText:function(f){if(0<f&&f<=this.$numTexts){f="text"+f;U.storageSetData(f,this.$doms[f].value)}},onStorageReady:function(){if(U.storageIsOk()){for(var f=1;f<=this.$numTexts;++f){U.storageGetData("text"+f,this,function(g,h){if(h){this.$doms[g].value=h}})}}},getText:function(f){var g=this.$getContent(f);return g?g.value:""},getCurrentText:function(){var f=this.$getContent(this.$getCurrentIndex());return f?f.value:""},setCurrentText:function(g){var f=this.$getCurrentIndex();var h=this.$getContent(f);if(h){h.value=g}this.$saveText(f)},clearCurrentText:function(){var f=this.$getCurrentIndex();var g=this.$getContent(f);if(g){g.value=""}this.$saveText(f)}};function d(){this.$frame=c("DIV");this.$frame.id=U.generateId();this.$frame.className=U.getPrefix("extraframe");this.setText()}d.prototype={getTabLabel:function(){return U.getMsg("tab_out")},getContent:function(){return this.$frame},setText:function(i,f){var h=typeof i==="undefined"?U.getMsg("msg_out"):P(String(i));var g="margin:0px; padding:0px; overflow:auto;font-size:"+parseInt(U.getPrefValue("fontSize"),10)+"px;max-height:"+parseInt(U.getPrefValue("maxOutputRows"),10)+"em;";if(f){g+="background-color:#ffaaaa"}this.$frame.innerHTML='<pre style="'+g+'">'+h+"</pre>"}};function M(){this.$doms=null;var f=new b();var g="width:100%;height:"+parseInt(U.getPrefValue("logRows"),10)+"em;font-size:"+parseInt(U.getPrefValue("fontSize"),10)+"px;";f.build({tag:"DIV",index:"frame",id:U.generateId(),cn:[{tag:"DIV",cn:{tag:"TEXTAREA",index:"log",style:g,wrap:"off",readonly:"true"}},{tag:"DIV",style:{textAlign:"right",marginTop:"4px"},cn:{tag:"INPUT",index:"clr",type:"button",value:U.getMsg("btn_clr")}}]});this.$doms=f.getElements();this.$doms.log.value=U.getMsg("msg_log");this.$doms.clr.onclick=A(this,"$onClear")}M.prototype={$onClear:function(){this.$doms.log.value=""},getTabLabel:function(){return U.getMsg("tab_log")},getContent:function(){return this.$doms.frame},log:function(f){this.$doms.log.value+=f}};function G(){this.$frame=c("DIV");this.$frame.id=U.generateId();this.$frame.className=U.getPrefix("extraframe");this.setHTML()}G.prototype={getTabLabel:function(){return U.getMsg("tab_htm")},getContent:function(){return this.$frame},setHTML:function(f){if(typeof f==="undefined"){var g="font-size:"+parseInt(U.getPrefValue("fontSize"),10)+"px;";this.$frame.innerHTML='<div style="'+g+'">'+U.getMsg("msg_htm")+"</div>"}else{this.$frame.innerHTML=String(f)}}};function T(){this.$doms=null;this.$tabs=null;this.$settingDoms=null;this.$previewDoms=null;this.$sourceDoms=null;this.$gadget=null;var f=new b();f.build({tag:"DIV",index:"frame",id:U.generateId(),cls:U.getPrefix("extraframe"),style:{display:"none"},cn:[{tag:"DIV",index:"tabs"},{tag:"DIV",style:{margin:"4px 0px",textAlign:"right"},cn:[{tag:"INPUT",index:"generate",type:"button",value:U.getMsg("btn_gad")}]}]});this.$doms=f.getElements();this.$tabs=new _IG_Tabs(U.getModuleId(),0,this.$doms.tabs);this.$tabs.alignTabs("left");this.$initSettingTab();this.$initPreviewTab();this.$initSourceTab();this.$doms.generate.onclick=A(this,"$onGenerate")}T.prototype={$initSettingTab:function(){var h="width:98%;margin:0px;";var g="width:10%; text-align:right; font-size:12px; overflow:hidden;";var i="width:89%;";var f="width:39%;";var k="width:100%;font-size:12px;";var l="width:100%;font-size:12px;";var j=new b();j.build({tag:"DIV",index:"frame",cn:{tag:"TABLE",style:h,cn:{tag:"TBODY",cn:[{tag:"TR",cn:[{tag:"TD",style:g,html:U.getMsg("gad_ttl")},{tag:"TD",colSpan:"3",style:i,cn:{tag:"INPUT",index:"title",type:"text",style:k}}]},{tag:"TR",cn:[{tag:"TD",style:g,html:U.getMsg("gad_wdt")},{tag:"TD",style:f,cn:{tag:"INPUT",index:"width",type:"text",style:k}},{tag:"TD",style:g,html:U.getMsg("gad_hgt")},{tag:"TD",style:f,cn:{tag:"INPUT",index:"height",type:"text",style:k}}]},{tag:"TR",cn:[{tag:"TD",style:g,html:U.getMsg("gad_htm")},{tag:"TD",style:f,cn:{tag:"SELECT",index:"html",style:l,cn:[{tag:"OPTION",value:"1",html:U.getMsg("tab")+" 1"},{tag:"OPTION",value:"2",html:U.getMsg("tab")+" 2"},{tag:"OPTION",value:"3",html:U.getMsg("tab")+" 3"},{tag:"OPTION",value:"4",html:U.getMsg("tab")+" 4"},{tag:"OPTION",value:"5",html:U.getMsg("tab")+" 5"}]}},{tag:"TD",style:g,html:U.getMsg("gad_scp")},{tag:"TD",style:f,cn:{tag:"SELECT",index:"script",style:l,cn:[{tag:"OPTION",value:"0",html:"----"},{tag:"OPTION",value:"1",html:U.getMsg("tab")+" 1"},{tag:"OPTION",value:"2",html:U.getMsg("tab")+" 2"},{tag:"OPTION",value:"3",html:U.getMsg("tab")+" 3"},{tag:"OPTION",value:"4",html:U.getMsg("tab")+" 4"},{tag:"OPTION",value:"5",html:U.getMsg("tab")+" 5"}]}}]}]}}});this.$settingDoms=j.getElements();this.$tabs.addTab(U.getMsg("tab_set"),{contentContainer:this.$settingDoms.frame,callback:A(this,"$onChangeTab")})},$initPreviewTab:function(){this.$previewDoms={frame:_gel(U.getPrefix("gadgetframe")),msg:_gel(U.getPrefix("gadgetmsg")),border:_gel(U.getPrefix("gadgetborder"))};this.$tabs.addTab(U.getMsg("tab_prv"),{contentContainer:this.$previewDoms.frame,callback:A(this,"$onChangeTab")});this.$gadget=new J(this.$previewDoms.border.id,{height:parseInt(U.getPrefValue("maxGadgetHeight"),10)})},$initSourceTab:function(){var g={width:"100%",height:"10em",fontSize:parseInt(U.getPrefValue("fontSize"),10)+"px"};var f=new b();f.build({tag:"DIV",index:"frame",cn:{tag:"TEXTAREA",index:"source",style:g,readonly:"true"}});this.$sourceDoms=f.getElements();this.$tabs.addTab(U.getMsg("tab_src"),{contentContainer:this.$sourceDoms.frame,callback:A(this,"$onChangeTab")})},$onGenerate:function(){var k=this.$settingDoms.title.value;var i=parseInt(this.$settingDoms.width.value,10);var f=parseInt(this.$settingDoms.height.value,10);var h=U.getText(this.$settingDoms.html.value);var g=U.getText(this.$settingDoms.script.value);if(k){k='\n      title="'+P(k)+'"'}else{k=""}if(i){i='\n      width="'+i+'"'}else{i=""}if(f){f='\n      height="'+f+'"'}else{f=""}if(g){g='\u003cscript type="text/javascript"\u003e\n'+g+"\n\u003c/script\u003e"}var j=['<?xml version="1.0" encoding="UTF-8" ?>',"<Module>","  <ModulePrefs"+k+i+f+">",'    <Require feature="setprefs" />','    <Require feature="settitle" />','    <Require feature="dynamic-height" />','    <Require feature="tabs" />','    <Require feature="drag" />','    <Require feature="grid" />','    <Require feature="minimessage" />','    <Require feature="analytics" />','    <Require feature="flash" />',"  </ModulePrefs>",'  <Content type="html">',"    \u003c![CDATA[",h,g,"    ]]\u003e","  </Content>","</Module>"].join("\n");this.$sourceDoms.source.value=j;this.$previewDoms.msg.style.display="none";this.$previewDoms.border.style.display="block";this.$gadget.update(j);this.$centeringPreview();U.adjustHeight()},$onChangeTab:function(f){if(this.$previewDoms&&this.$previewDoms.frame.id==f){this.$centeringPreview()}U.adjustHeight()},$centeringPreview:function(){var f=this.$previewDoms.border;var h=f.parentNode.offsetWidth;var g=this.$gadget.getDefaultHeight();if(h>0){f.style.width=(_min(h,this.$gadget.getWidth())+2)+"px";f.style.height=(_min(g,this.$gadget.getHeight())+2)+"px"}},getTabLabel:function(){return U.getMsg("tab_gad")},getContent:function(){return this.$doms.frame}};function B(){U.setCurrentText(P(U.getCurrentText()))}function F(){var f=U.getCurrentText();f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;");f=f.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var g=c("div");g.innerHTML="<pre>"+f+"</pre>";U.setCurrentText(a(g))}function O(){U.setCurrentText(S(U.getCurrentText()))}function Y(){U.setCurrentText(N(U.getCurrentText()))}function e(g){var f=new b();f.build(g,[{tag:"DIV",index:"msg",html:U.getMsg("tol_bkm")},{tag:"DIV",index:"result",style:{display:"none"},cn:[{tag:"DIV",cn:{tag:"A",index:"link",html:U.getMsg("tol_bkc")}},{tag:"DIV",style:{marginTop:"4px"},cn:[{tag:"DIV",html:U.getMsg("tol_src")},{tag:"TEXTAREA",index:"source",style:{width:"100%",height:"5em"},readonly:"true",wrap:"soft"}]}]}]);this.$doms=f.getElements();this.$pattern=new RegExp(["//.*","/\\*(?:[^*]|\\*(?!/))+\\*/","('|\")(?:[^\\\\\\1]|\\\\.)*?\\1","([^.)\\]$\\w\\s]\\s*)(/(?![/\\*])(?:[^\\\\/\\[]|\\\\.|\\[(?:[^\\\\\\]]|\\\\.)*\\])*?/)"].join("|"),"g")}e.prototype={onExecute:function(){var g=U.getCurrentText();var f=[];g=g.replace(/\r\n?/g,"\n");g=g.replace(/\~/g,"~T");g=g.replace(/\+\+/g,"~P");g=g.replace(/\-\-/g,"~M");g=g.replace(this.$pattern,function(k,j,i,h){if(j){f[f.length]=k;return"~S"}else{if(i&&h){f[f.length]=h;return i+"~S"}else{return""}}});g=g.replace(/\s+/g," ");g=g.replace(/^ +| +$/g,"");g=g.replace(/\~S/g,function(){return f.shift()});g=g.replace(/\~P/g,"++").replace(/\~M/g,"--").replace(/\~T/g,"~");this.$doms.link.href="javascript:(function(){"+g+"})()";this.$doms.source.value=g;this.$doms.msg.style.display="none";this.$doms.result.style.display="block";U.adjustHeight()}};function Q(){this.$doms=null;this.$entries=[];var g=[];for(var h=0;h<Q.$template.length;++h){var j=Q.$template[h];g[h]={tag:"OPTION",value:h,html:U.getMsg(j.label)};var k={};if(C(j.cls)){var l=c("DIV");l.style.display="none";l.style.fontSize=U.getPrefValue("fontSize")+"px";l.style.marginTop="4px";k.scope=new j.cls(l);k.func=k.scope.onExecute;k.frame=l}else{if(C(j.func)){k.scope=window;k.func=j.func}}this.$entries[h]=k}var f=new b();f.build({tag:"DIV",index:"frame",id:U.generateId(),cls:U.getPrefix("extraframe"),cn:[{tag:"DIV",cn:[{tag:"SELECT",index:"select",cn:g},{tag:"INPUT",index:"execute",type:"button",value:U.getMsg("tol_exe"),style:{marginLeft:"8px"}}]},{tag:"DIV",index:"content"}]});this.$doms=f.getElements();this.$doms.execute.onclick=A(this,"$onExecute");this.$doms.select.onchange=A(this,"$onChange");for(var h=0;h<this.$entries.length;++h){if(this.$entries[h].frame){this.$doms.content.appendChild(this.$entries[h].frame)}}}Q.$template=[{label:"tol_hes",func:B},{label:"tol_hue",func:F},{label:"tol_ues",func:O},{label:"tol_uue",func:Y},{label:"tol_bkl",cls:e}];Q.prototype={$onExecute:function(){var g=parseInt(this.$doms.select.value,10);if(0<=g&&g<this.$entries.length){var f=this.$entries[g];if(typeof f.func==="function"){f.func.call(f.scope)}}},$onChange:function(){var g=parseInt(this.$doms.select.value,10);for(var f=0;f<this.$entries.length;++f){if(this.$entries[f].frame){this.$entries[f].frame.style.display=(f==g?"block":"none")}}U.adjustHeight()},getTabLabel:function(){return U.getMsg("tab_tol")},getContent:function(){return this.$doms.frame}};function H(){this.$prefix="\n----\n"}H.prototype={log:function(f){U.log(this.$prefix+f);this.$prefix=""},getPrefs:function(){return U.getPrefs()}};var U={$nextId:0,$prefs:new _IG_Prefs(Z),$prefix:"mod"+Z,$flash:null,$storageId:"mod"+Z+"JsConsoleStorage",$storageHdl:null,$storage:{},$textView:null,$extraTabs:null,$outputView:null,$logView:null,$htmlView:null,$gadgetView:null,$toolsView:null,$minimsg:null,$prefsMap:{prefsVer:"pr",fontSize:"fs",textRows:"tr",maxOutputRows:"or",logRows:"lr",maxGadgetHeight:"gh",saveText:"sv"},init:function(){this.$textView=new L();this.$minimsg=new _IG_MiniMessage(Z);this.$storageHdl=new W(V(this,"onStorageFlush"),3000);if(this.$prefs.getBool("sv")&&!D){if(this.$prefs.getBool("sm")){var j=this.getMsg("msg_sav").replace(/_\_MODULE_ID__/,Z).replace(/^\s+|\s+$/,"");this.$minimsg.createDismissibleMessage(j,A(this,"$onSaveWarningDismissed"))}}else{if(!this.$prefs.getBool("sm")){this.$prefs.set("sm",1)}}if(/synd=ig/.test(document.location)){for(var h=0;h<=0;++h){var g=this.$prefs;var f=("00"+h).substr(-3);var j=(this.getMsg("notification"+f)||"").replace(/_\_MODULE_ID__/,Z);if(j&&g.getBool("n"+f)){this.$minimsg.createDismissibleMessage(j,function(){g.set("n"+f,"0");setTimeout(function(){_IG_AdjustIFrameHeight()},0);return true})}}}this.$initExtraViews();this.$initButtons();this.adjustHeight()},$initButtons:function(){var h=this;var g=new b();var f=E(h.$prefix+"buttons");f.style.margin="4px 0px";var i={marginRight:"8px"};g.build(f,[{tag:"DIV",style:"float:right",cn:[{tag:"INPUT",index:"clr",type:"button",value:h.getMsg("btn_clr")}]},{tag:"DIV",cn:[{tag:"INPUT",index:"run",type:"button",value:h.getMsg("btn_run"),style:i},{tag:"INPUT",index:"htm",type:"button",value:h.getMsg("btn_htm"),style:i}]}]);g.getEl("run").onclick=A(h,"$onRunAsScript");g.getEl("htm").onclick=A(h,"$onReplaceHTML");g.getEl("clr").onclick=A(h,"$onClearText")},$initExtraViews:function(){this.$extraTabs=new _IG_Tabs(Z,0,E(this.$prefix+"extraview"));this.$outputView=new d();this.$logView=new M();this.$htmlView=new G();this.$gadgetView=new T();this.$toolsView=new Q();this.$extraTabs.alignTabs("left");var g=[this.$outputView,this.$logView,this.$htmlView,this.$gadgetView,this.$toolsView];for(var j=0;j<g.length;++j){var f=g[j];var h=f.getTabLabel();var k=f.getContent();var l=A(this,"$onChangeTab");this.$extraTabs.addTab(h,{contentContainer:k,callback:l})}},$onRunAsScript:function(){var i=this.$textView.getCurrentText();var f="";var g=false;try{f=(function(){window.jsconsole=new H();return this.$eval(i)})()}catch(h){f=h.message||h.description||String(h);g=true}this.$outputView.setText(f,g);this.adjustHeight()},$onClearText:function(){this.$textView.clearCurrentText()},$onReplaceHTML:function(){var f=this.$textView.getCurrentText();if(f){this.$htmlView.setHTML(f);this.adjustHeight()}},$onChangeTab:function(){this.adjustHeight()},$onSaveWarningDismissed:function(){this.$prefs.set("sm",0);U.adjustHeight();return true},adjustHeight:function(){_IG_AdjustIFrameHeight()},generateId:function(){return this.$prefix+"generatedId"+this.$nextId++},getModuleId:function(){return Z},getPrefix:function(f){return this.$prefix+f},getPrefs:function(){return this.$prefs},getPrefValue:function(f){return this.$prefs.getString(this.$prefsMap[f]||f)},getPrefBool:function(f){return this.$prefs.getBool(this.$prefsMap[f]||f)},getMsg:function(f){return this.$prefs.getMsg(f)},getText:function(f){return this.$textView.getText(f)},getCurrentText:function(){return this.$textView.getCurrentText()},setCurrentText:function(f){this.$textView.setCurrentText(f)},log:function(f){this.$logView.log(f)},onStorageReady:function(){if(!D){this.$flash=E(U.getPrefix("JsConsoleStorage"));this.$flash.open(this.$storageId);if(this.$textView){this.$textView.onStorageReady()}}},onStorageFlush:function(){if(D){var g=this.$storage;for(var f in g){SocialGoodies.DataRequest.storeAppData("VIEWER",f,g[f])}}else{if(this.$flash){this.$flash.flush()}}},storageSetData:function(f,g){if(D){this.$storage[f]=g;this.$storageHdl.invoke()}else{if(this.$flash){this.$flash.setData(f,g);this.$storageHdl.invoke()}}},storageGetData:function(f,g,h){if(D){SocialGoodies.DataRequest.fetchAppData("VIEWER",f,{escape:"none",callback:function(k){for(var j in k){h.call(g,f,k[j][f]);break}}})}else{if(this.$flash){h.call(g,f,this.$flash.getData(f))}}},storageIsOk:function(){return this.$flash?this.$flash.isOk():D},useLegacy:X,useOpenSocial:D};if(window.Components){U.init()}else{_IG_RegisterOnloadHandler(function(){U.init()})}return U})();Gadget.$eval=function(text){return eval(text)};</script>

<div>
  <script type="text/javascript">
    if(Gadget.getPrefBool('saveText') && !Gadget.useOpenSocial)
    {
      document.open();
      if(window.ActiveXObject)
      {
        document.write([
          '<object id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage' + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="10" height="10">',
          '    <param name="src" value="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '" />',
          '    <param name="flashVars" value="prefix=' + 'Gadget.onStorage' + '" />',
          '</object>'].join('\n'));
      }
      else
      {
        document.write([
          '<embed',
          '    id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage"',
          '    src="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '"',
          '    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"',
          '    width="10" height="10"',
          '    flashVars="prefix=' + 'Gadget.onStorage"'].join('\n'));
      }
      document.close();
    }
  </script>
</div>

<div style="clear:both;"></div>

    ]]>
  </Content>
</Module>
