<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
	 title="JavaScript Console"
	 directory_title="JavaScript Console"
	 title_url="http://webos-goodies.jp/"
	 description="__MSG_description__"
	 scrolling="false"
	 height="200"
	 screenshot="__MSG_screenshot__"
	 thumbnail="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/img/thumbnail.png"
	 author="WebOS Goodies"
	 author_email="support@webos-goodies.jp"
	 author_affiliation="WebOS Goodies"
	 author_location="Tokyo, Japan"
	 author_link="http://webos-goodies.jp/">
	<Require feature="setprefs" />
	<Require feature="settitle" />
	<Require feature="dynamic-height" />
	<Require feature="tabs" />
	<Require feature="drag" />
	<Require feature="grid" />
	<Require feature="minimessage" />
	<Require feature="analytics" />
	<Require feature="flash" />
	<Require feature="views" />
	<Require feature="skins" />
	<Require feature="opensocial-0.8" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ALL_ALL.xml" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ja_ALL.xml" lang="ja" />
  </ModulePrefs>
  <UserPref name="pr" datatype="hidden" default_value="1" /><!-- Preference revision -->
  <UserPref name="sm" datatype="hidden" default_value="1" /><!-- Show message about Save Text -->
  <UserPref name="sv" display_name="__MSG_prf_sav__" datatype="bool"   required="true" default_value="0" />
  <UserPref name="fs" display_name="__MSG_prf_fon__" datatype="string" required="true" default_value="12" />
  <UserPref name="tr" display_name="__MSG_prf_txt__" datatype="string" required="true" default_value="15" />
  <UserPref name="or" display_name="__MSG_prf_out__" datatype="string" required="true" default_value="8" />
  <UserPref name="lr" display_name="__MSG_prf_log__" datatype="string" required="true" default_value="8" />
  <UserPref name="gh" display_name="__MSG_prf_gad__" datatype="string" required="true" default_value="200" />
  <UserPref name="u1" display_name="__MSG_prf_usr__ 1" datatype="string" />
  <UserPref name="u2" display_name="__MSG_prf_usr__ 2" datatype="string" />
  <UserPref name="u3" display_name="__MSG_prf_usr__ 3" datatype="string" />
  <UserPref name="u4" display_name="__MSG_prf_usr__ 4" datatype="string" />

  <UserPref name="n000" datatype="hidden" default_value="1" />

  <Content type="html">
	<![CDATA[

<style type="text/css">
  @import url(http://www.google.com/ig/tablib.css);
  .mmlib_table__MODULE_ID__ {
    __MSG_minimessage_style__
    padding:4px;
    margin:0px;
  }
  .mod__MODULE_ID__extraframe {
    border: 1px solid #676767;
    border-top-style: none;
    padding: 4px;
  }
</style>

<div id="mod__MODULE_ID__buttons"></div>
<div id="mod__MODULE_ID__extraview"></div>

<div style="font-size:10px;float:right;margin-top:4px;">
  <a target="_blank" href="http://webos-goodies.jp/">__MSG_blog__</a> |
  <a target="_blank" href="http://groups.google.com/group/webos-goodies">__MSG_support__</a>
</div>

<script type="text/javascript">
  // You can get an unpacked version of the following script at http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/script.js
  var Gadget=(function(){var a=document;var F=__MODULE_ID__;var j=new _IG_Prefs(F);var D=!(window.gadgets&&gadgets.views&&gadgets.views.getCurrentView()!==undefined);var Y=!D&&!!window.opensocial;var B=1;var Q="border: 1px solid #676767; border-top-style: none; padding: 4px;";function d(o){return o===null}function N(o){return typeof o==="function"}function J(o){return typeof o==="string"}function k(o,p){var q=o[p];return function(){q.apply(o,arguments)}}function c(o,q){var s=o[q];var p=[];for(var r=2;r<arguments.length;++r){p[p.length]=arguments[r]}return function(){s.apply(o,p)}}function G(o){return a.createElement(o)}function e(){return a.createDocumentFragment()}function n(o){return a.getElementById(o)}function i(p){var o=J(p)?n(p):p;return o.textContent!==undefined?o.textContent:o.innerText}function E(o){a.body.appendChild(o)}function K(r,p,o){var q=G("div");q.id=r;q.style.cssText="display:none;"+(p||"");q.innerHTML=o||"";E(q);return q}function X(o){o=o.replace(/&/g,"&amp;");o=o.replace(/</g,"&lt;").replace(/>/g,"&gt;");o=o.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");return o}function l(o){return(window.encodeURIComponent?encodeURIComponent(o):escape(o)).replace(/\%20/g,"+")}function f(o){o=o.replace(/\+/g,"%20");return window.decodeURIComponent?decodeURIComponent(o):unescape(o)}function M(){return"JsConsole8395"+B++}function R(p,o){return p.replace(/\$(\d+)/g,function(r,q){return o[parseInt(q,10)]})}function O(){this._nodes={}}O.prototype={getEl:function(o){return this._nodes[o]},getElements:function(){var o={};for(var p in this._nodes){o[p]=this._nodes[p]}return o},build:function(p,o){this._nodes={};if(!o){o=p;p=null}if(!p){p=a.createDocumentFragment()}return this._build(p,o)},_build:function(q,p){if(p instanceof Array){for(var s=0;s<p.length;++s){this._build(q,p[s])}}else{if(p.nodeType){q.appendChild(p)}else{var t=a.createElement(p.tag?p.tag:"DIV");var o=t.setAttribute?true:false,u=null;for(var s in p){if(!p.hasOwnProperty(s)||typeof p[s]=="function"){continue}var r=p[s];switch(s){case"tag":case"html":break;case"cls":t.className=r;break;case"style":this.applyStyles(t,r);break;case"value":t[s]=r;break;case"index":this._nodes[r]=t;break;case"children":case"cn":u=r;break;default:if(o){t.setAttribute(s,r)}else{t[s]=r}break}}if(u){this._build(t,u)}if(p.html){t.innerHTML+=p.html}q.appendChild(t)}}return q},applyStyles:function(p,q){if(typeof q==="string"){p.style.cssText=q}else{for(var o in q){if(typeof q[o]==="string"){p.style[o]=q[o]}}}}};SocialGoodies=(function(){var r=null,u=null,s=[],p=0;var v={fetchPerson:function(y,z){t(z,function(AA,AB){r.add(r.newFetchPersonRequest(y),AA);return{type:"fetchPerson",hasData:true}})},fetchPeople:function(y,z){t(z,function(AA,AB){r.add(r.newFetchPeopleRequest(o(y)),AA);return{type:"fetchPeople",hasData:true}})},storeAppData:function(y,AB,AA,z){t(z,function(AC,AD){r.add(r.newUpdatePersonAppDataRequest(y,AB,AA),AC);return{type:"storeAppData",hasData:false}})},fetchAppData:function(z,y,AA){t(AA,function(AB,AC){r.add(r.newFetchPersonAppDataRequest(o(z),y,AC.params),AB);return{type:"fetchAppData",hasData:true}})},removeAppData:function(z,y,AA){t(AA,function(AB,AC){r.add(r.newRemovePersonAppDataRequest(z,y),AB);return{type:"removeAppData",hasData:false}})},send:function(){clearTimeout(u);u=null;x()},Error:function(AB,AA,z){var y=this;y.getErrorCode=function(){return AB||AA};y.getErrorMessage=function(){return AA||AB};y.isBatchLevelError=function(){return z}}};function t(AB,AA){AB=AB||{};q();var AC={};if(AB.escape=="none"){AC[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]=opensocial.EscapeType.NONE}AB.params=AC;var z=w();var y=AA(z,AB||{});y.key=z;y.callback=AB.callback;y.scope=AB.scope;s.push(y)}function w(){return"uniqueKey"+p++}function q(){if(!r){r=opensocial.newDataRequest()}if(u===null){u=setTimeout(x,0)}}function o(y){if(typeof y=="string"){if(/^(.+)_FRIENDS$/.exec(y)){y=opensocial.newIdSpec({userId:RegExp.$1,groupId:"FRIENDS"})}else{y=opensocial.newIdSpec({userId:y,groupId:"SELF"})}}return y}function x(){var z=r,y=s;u=null;r=null;s=[];if(y.length>0){z.send(function(AC){if(!AC.hadError()){for(var AE=0,AB=y.length;AE<AB;++AE){var AA=y[AE];if(typeof AA.callback=="function"){var AF=AC.get(AA.key),AG=null,AD=null;if(!AF||AF.hadError()){AD=new v.Error(AF.getErrorCode(),AF.getErrorMessage(),false)}else{if(AA.hasData){AG=AF.getData()}}AA.callback.call(AA.scope,AG,AD)}}}else{var AD=new v.Error("",AC.getErrorMessage(),true);for(var AE=0,AB=y.length;AE<AB;++AE){var AA=y[AE];if(typeof AC.callback=="function"){AA.callback.call(AA.scope,null,AD)}}}})}}return{DataRequest:v}})();function m(p,o){this.$callback=p;this.$interval=o;this.$timerId=null}m.prototype={invoke:function(){var o=this;if(d(o.$timerId)){clearTimeout(o.$timerId)}o.$timerId=setTimeout(o.$callback,o.$interval)}};var b=(function(){var q=0,s=null,o=null;function r(u){return document.createElement(u)}function p(u){u=u.replace(/</g,"&lt;").replace(/>/g,"&gt;");u=u.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var v=r("div");v.innerHTML="<pre>"+u+"</pre>";return v.textContent!==undefined?v.textContent:v.innerText}function t(z,AA){if(!(this instanceof t)){return new t(z,AA)}var AE=this;AA=AA||{};var v=AA.previewName||"gadgetPreview"+q++,AB=AA.title||"no title",AF=parseInt(AA.width||320,10),w=parseInt(AA.height||200,10),AC=AB,x=AF,AD=w,y=AA.border?1:0;if(!s){var u=r("DIV");o=o||r("TEXTAREA");s=r("FORM");o.name="rawxml";s.method="POST";u.style.display="none";s.appendChild(o);u.appendChild(s);document.body.appendChild(u)}AE.update=function(AH){var AG=this;var AI=AH.substring(0,AH.search(/<(?:UserPref|Content)/));AC=AI.match(/title="([^\u0022]*)"/)?p(RegExp.$1):AB;x=AI.match(/width="(\d+)"/)?parseInt(RegExp.$1,10):AF;AD=AI.match(/height="(\d+)"/)?parseInt(RegExp.$1,10):w;try{delete window.frames[v]}catch(AJ){}document.getElementById(z).innerHTML=['<iframe id="'+v+'" name="'+v+'"','src="about:blank" frameborder='+y,"width="+x,"height="+AD,,"></iframe>"].join(" ");o.value=AH;s.action=["http://www.gmodules.com/ig/ifr?","title="+(window.encodeURIComponent?encodeURIComponent:escape)(AC).replace(/%20/g,"+"),"w="+x,"h="+AD,"synd=open","nocache=1","output=html"].join("&");s.target=v;s.submit()};AE.getPreviewName=function(){return v};AE.getTitle=function(){return AC};AE.getWidth=function(){return x};AE.getHeight=function(){return AD};AE.getDefaultTitle=function(){return AB};AE.getDefaultWidth=function(){return AF};AE.getDefaultHeight=function(){return w};AE=null}return t})();function S(t){t=t||{};var p=this,r=new _IG_Tabs(F,0,t.parentId?n(t.parentId):null),q=[],u=t.callback,s=t.scope;r.alignTabs("left");function o(x){for(var y=0,w=q.length;y<w;++y){var v=q[y];if(v.$getId()==x&&N(v.$onActivate)){v.$onActivate.call(v)}}if(N(u)){u.call(s,x)}}p.$getPanel=function(v){return q[v]};p.$numPanels=function(v){return q.length};p.$getCurrentPanel=function(){var v=r.getSelectedTab();return v?q[v.getIndex()]:null};p.$addPanel=function(v){q.push(v);r.addTab(v.$getLabel(),{contentContainer:n(v.$getId()),callback:o})};p.$forEach=function(y,x){for(var w=0,v=q.length;w<v;++w){y.call(x,q[w],w,q)}};p=t=null}function g(q){var p=this,o=M(),t=M(),s="text"+q,r=('<textarea id="$0" wrap="off" style="width:100%; height:$1em; font-size:$2px;"></textarea>');K(o,"",R(r,[t,j.getInt("tr"),j.getInt("fs")]));p.$getId=function(){return o};p.$getLabel=function(){return""+q};p.$getContent=function(){return n(t).value};p.$setContent=function(u){n(t).value=u};p.$save=function(){A.storageSetData(s,n(t).value)};p.$load=function(){A.storageGetData(s,this,function(u,v){if(v){this.$setContent(v)}})};n(t).onchange=c(p,"$save");p=null}function H(){var p=this,o=M(),q=('<pre style="margin:0px; padding:0px; overflow:auto; font-size:$0px; max-height:$1em; $2">$3</pre>');K(o,Q);p.$getId=function(){return o};p.$getLabel=function(){return A.getMsg("tab_out")};p.$setText=function(s,r){n(o).innerHTML=R(q,[j.getInt("fs"),j.getInt("or"),r?"background-color:#ffaaaa":"",typeof s==="undefined"?A.getMsg("msg_out"):X(""+s)])};p.$setText();A.$addEventHandler("output",k(this,"$setText"));p=null}function I(){var p=this,o=M(),q=M(),s=M(),r=('<div><textarea id="$0" wrap="off" readonly="true" style="width:100%; height:$1em; font-size:$2px;"></textarea></div><div style="text-align:right; marginTop:4px;"><input type="button" id="$3" value="$4" /></div>');K(o,"",R(r,[q,j.getInt("lr"),j.getInt("fs"),s,A.getMsg("btn_clr")]));p.$getId=function(){return o};p.$onClear=function(){n(q).value=""};p.$getLabel=function(){return A.getMsg("tab_log")};p.$log=function(u){n(q).value+=u};n(q).value=A.getMsg("msg_log");n(s).onclick=k(p,"$onClear");A.$addEventHandler("log",k(p,"$log"));p=null}function Z(){var p=this,o=M(),q='<div style="font-size:$0px;">$1</div>';K(o,Q);p.$getId=function(){return o};p.$getLabel=function(){return A.getMsg("tab_htm")};p.$setHTML=function(r){n(o).innerHTML=r||R(q,[j.getInt("fs"),A.getMsg("msg_htm")])};p.$setHTML();A.$addEventHandler("html",k(p,"$setHTML"))}function U(){var p=M(),s=M(),v=M(),t=null,u=('<div id="$0"></div><div style="margin:4px 0px; text-align:right;"><input id="$1" type="button" value="$2" /></div>');K(p,Q,R(u,[s,v,A.getMsg("btn_gad")]));var r=function(){var AF=this,AD=M(),x=M(),AA=M(),AB=M(),y=M(),w=M(),AG="",AC=A.getMsg("tab")+" ",AE=('<table style="width:98%;margin:0px;"><tr><td style="$0">$5</td><td colspan="3" style="$1"><input id="$6" type="text" style="$3" /></td></tr><tr><td style="$0">$7</td><td style="$2"><input id="$8" type="text" style="$3" /></td><td style="$0">$9</td><td style="$2"><input id="$10" type="text" style="$3" /></td></tr><tr><td style="$0">$11</td><td style="$2"><select id="$12" style="$4">$15</select></td><td style="$0">$13</td><td style="$2"><select id="$14" style="$4"><option value="0">----</option>$15</select></td></table>');for(var z=1;z<=5;++z){AG+='<option value="'+z+'">'+AC+z+"</option>"}K(AD,"",R(AE,["width:10%; text-align:right; font-size:12px; overflow:hidden;","width:89%;","width:39%;","width:100%;font-size:12px;","width:100%;font-size:12px;",A.getMsg("gad_ttl"),x,A.getMsg("gad_wdt"),AA,A.getMsg("gad_hgt"),AB,A.getMsg("gad_htm"),y,A.getMsg("gad_scp"),w,AG]));AF.$getId=function(){return AD};AF.$getLabel=function(){return A.getMsg("tab_set")};AF.$getContent=function(){return{title:n(x).value,width:parseInt(n(AA).value,10),height:parseInt(n(AB).value,10),html:A.getText(n(y).value),script:A.getText(n(w).value)}};AF=null};var o=function(){var x=this,w=M();msgId=M();borderId=M();preview=null,u=('<div id="$0" style="font-size:$1px; margin-top: 4px;">$2</div><div id="$3" style="border:1px dotted #676767;margin:0px auto;overflow:auto;display:none;"></div>');K(w,"",R(u,[msgId,j.getInt("fs"),A.getMsg("msg_gad"),borderId]));preview=new b(borderId,{height:j.getInt("gh")});x.$getId=function(){return w};x.$getLabel=function(){return A.getMsg("tab_prv")};x.$onActivate=function(){this.$centering()};x.$centering=function(){var y=n(borderId),AA=y.parentNode.offsetWidth,z=preview.getDefaultHeight();if(AA>0){y.style.width=(_min(AA,preview.getWidth())+2)+"px";y.style.height=(_min(z,preview.getHeight())+2)+"px"}};x.$update=function(y){n(msgId).style.display="none";n(borderId).style.display="block";preview.update(y)};x=null};var q=function(){var x=this,w=M(),z=M(),y=('<textarea id="$0" wrap="off" readonly="true" style="width:100%; height:10em; font-size:$1px;"></textarea>');K(w,"",R(y,[z,j.getInt("fs")]));x.$getId=function(){return w};x.$getLabel=function(){return A.getMsg("tab_src")};x.$setContent=function(AA){n(z).value=AA};x=null};this.$onGenerate=function(){var AA=t.$getPanel(0).$getContent();var AC=AA.title;var z=AA.width;var w=AA.height;var y=AA.html;var x=AA.script;if(AC){AC='\n      title="'+X(AC)+'"'}else{AC=""}if(z){z='\n      width="'+z+'"'}else{z=""}if(w){w='\n      height="'+w+'"'}else{w=""}if(x){x='\u003cscript type="text/javascript"\u003e\n'+x+"\n\u003c/script\u003e"}var AB=['<?xml version="1.0" encoding="UTF-8" ?>',"<Module>","  <ModulePrefs"+AC+z+w+">",'    <Require feature="setprefs" />','    <Require feature="settitle" />','    <Require feature="dynamic-height" />','    <Require feature="tabs" />','    <Require feature="drag" />','    <Require feature="grid" />','    <Require feature="minimessage" />','    <Require feature="analytics" />','    <Require feature="flash" />',"  </ModulePrefs>",'  <Content type="html">',"    \u003c![CDATA[",y,x,"    ]]\u003e","  </Content>","</Module>"].join("\n");t.$getPanel(2).$setContent(AB);t.$getPanel(1).$update(AB);t.$getPanel(1).$centering();A.adjustHeight()};this.$getId=function(){return p};this.$getLabel=function(){return A.getMsg("tab_gad")};this.$onChangeTab=function(){A.adjustHeight()};t=new S({parentId:s,callback:k(this,"$onChangeTab")});t.$addPanel(new r());t.$addPanel(new o());t.$addPanel(new q());n(v).onclick=k(this,"$onGenerate")}function V(){A.setCurrentText(X(A.getCurrentText()))}function W(){var o=A.getCurrentText();o=o.replace(/</g,"&lt;").replace(/>/g,"&gt;");o=o.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var p=G("div");p.innerHTML="<pre>"+o+"</pre>";A.setCurrentText(i(p))}function P(){A.setCurrentText(l(A.getCurrentText()))}function C(){A.setCurrentText(f(A.getCurrentText()))}function L(p){var o=new O();o.build(p,[{tag:"DIV",index:"msg",html:A.getMsg("tol_bkm")},{tag:"DIV",index:"result",style:{display:"none"},cn:[{tag:"DIV",cn:{tag:"A",index:"link",html:A.getMsg("tol_bkc")}},{tag:"DIV",style:{marginTop:"4px"},cn:[{tag:"DIV",html:A.getMsg("tol_src")},{tag:"TEXTAREA",index:"source",style:{width:"100%",height:"5em",fontSize:"12px"},readonly:"true",wrap:"soft"}]}]}]);this.$doms=o.getElements();this.$pattern=new RegExp(["//.*","/\\*(?:[^*]|\\*(?!/))+\\*/","('|\")(?:[^\\\\\\1]|\\\\.)*?\\1","([^.)\\]$\\w\\s]\\s*)(/(?![/\\*])(?:[^\\\\/\\[]|\\\\.|\\[(?:[^\\\\\\]]|\\\\.)*\\])*?/)"].join("|"),"g")}L.prototype={onExecute:function(){var p=A.getCurrentText();var o=[];p=p.replace(/\r\n?/g,"\n");p=p.replace(/\~/g,"~T");p=p.replace(/\+\+/g,"~P");p=p.replace(/\-\-/g,"~M");p=p.replace(this.$pattern,function(t,s,r,q){if(s){o[o.length]=t;return"~S"}else{if(r&&q){o[o.length]=q;return r+"~S"}else{return""}}});p=p.replace(/\s+/g," ");p=p.replace(/^ +| +$/g,"");p=p.replace(/\~S/g,function(){return o.shift()});p=p.replace(/\~P/g,"++").replace(/\~M/g,"--").replace(/\~T/g,"~");this.$doms.link.href="javascript:(function(){"+p+"})()";this.$doms.source.value=p;this.$doms.msg.style.display="none";this.$doms.result.style.display="block";A.adjustHeight()}};function h(){this.$doms=null;this.$entries=[];var p=[];for(var q=0;q<h.$template.length;++q){var r=h.$template[q];p[q]={tag:"OPTION",value:q,html:A.getMsg(r.label)};var s={};if(N(r.cls)){var t=G("DIV");t.style.display="none";t.style.fontSize=A.getPrefValue("fontSize")+"px";t.style.marginTop="4px";s.scope=new r.cls(t);s.func=s.scope.onExecute;s.frame=t}else{if(N(r.func)){s.scope=window;s.func=r.func}}this.$entries[q]=s}var o=new O();o.build({tag:"DIV",index:"frame",id:A.generateId(),cls:A.getPrefix("extraframe"),cn:[{tag:"DIV",cn:[{tag:"SELECT",index:"select",cn:p},{tag:"INPUT",index:"execute",type:"button",value:A.getMsg("tol_exe"),style:{marginLeft:"8px"}}]},{tag:"DIV",index:"content"}]});this.$doms=o.getElements();this.$doms.execute.onclick=k(this,"$onExecute");this.$doms.select.onchange=k(this,"$onChange");a.body.appendChild(this.$doms.frame);for(var q=0;q<this.$entries.length;++q){if(this.$entries[q].frame){this.$doms.content.appendChild(this.$entries[q].frame)}}}h.$template=[{label:"tol_hes",func:V},{label:"tol_hue",func:W},{label:"tol_ues",func:P},{label:"tol_uue",func:C},{label:"tol_bkl",cls:L}];h.prototype={$onExecute:function(){var p=parseInt(this.$doms.select.value,10);if(0<=p&&p<this.$entries.length){var o=this.$entries[p];if(typeof o.func==="function"){o.func.call(o.scope)}}},$onChange:function(){var p=parseInt(this.$doms.select.value,10);for(var o=0;o<this.$entries.length;++o){if(this.$entries[o].frame){this.$entries[o].frame.style.display=(o==p?"block":"none")}}A.adjustHeight()},$getId:function(){return this.$doms.frame.id},$getLabel:function(){return A.getMsg("tab_tol")}};function T(){this.$prefix="\n----\n"}T.prototype={log:function(o){A.log(this.$prefix+o);this.$prefix=""},getPrefs:function(){return A.getPrefs()}};var A={$nextId:0,$prefs:j,$prefix:"mod"+F,$flash:null,$storageId:"mod"+F+"JsConsoleStorage",$storageHdl:null,$storage:{},$textView:null,$extraTabs:null,$extraPanels:[],$minimsg:null,$events:{output:[],log:[],html:[]},$prefsMap:{prefsVer:"pr",fontSize:"fs",textRows:"tr",maxOutputRows:"or",logRows:"lr",maxGadgetHeight:"gh",saveText:"sv"},$addEventHandler:function(p,o){if(this.$events[p]){this.$events[p].push(o)}},$invokeEvent:function(s){var p=this.$events[s]||[],q=Array.prototype.slice.call(arguments,1);for(var r=0,o=p.length;r<o;++r){p[r].apply(window,q)}},init:function(){this.$textView=new S();this.$minimsg=new _IG_MiniMessage(F);this.$storageHdl=new m(c(this,"onStorageFlush"),3000);if(this.$prefs.getBool("sv")&&!Y){if(this.$prefs.getBool("sm")){var r=this.getMsg("msg_sav").replace(/_\_MODULE_ID__/,F).replace(/^\s+|\s+$/,"");this.$minimsg.createDismissibleMessage(r,k(this,"$onSaveWarningDismissed"))}}else{if(!this.$prefs.getBool("sm")){this.$prefs.set("sm",1)}}if(/synd=ig/.test(a.location)){for(var q=0;q<=0;++q){var p=this.$prefs;var o=("00"+q).substr(-3);var r=(this.getMsg("notification"+o)||"").replace(/_\_MODULE_ID__/,F);if(r&&p.getBool("n"+o)){this.$minimsg.createDismissibleMessage(r,function(){p.set("n"+o,"0");setTimeout(function(){_IG_AdjustIFrameHeight()},0);return true})}}}for(var q=0;q<5;++q){this.$textView.$addPanel(new g(q+1))}if(this.storageIsOk()){this.$textView.$forEach(function(s){s.$load()})}this.$initExtraViews();this.$initButtons();this.adjustHeight()},$initButtons:function(){var q=this;var p=new O();var o=n(q.$prefix+"buttons");o.style.margin="4px 0px";var r={marginRight:"8px"};p.build(o,[{tag:"DIV",style:"float:right",cn:[{tag:"INPUT",index:"clr",type:"button",value:q.getMsg("btn_clr")}]},{tag:"DIV",cn:[{tag:"INPUT",index:"run",type:"button",value:q.getMsg("btn_run"),style:r},{tag:"INPUT",index:"htm",type:"button",value:q.getMsg("btn_htm"),style:r}]}]);p.getEl("run").onclick=k(q,"$onRunAsScript");p.getEl("htm").onclick=k(q,"$onReplaceHTML");p.getEl("clr").onclick=k(q,"$onClearText")},$initExtraViews:function(){var q=this.$extraPanels;this.$extraTabs=new _IG_Tabs(F,0,n(this.$prefix+"extraview"));q.push(new H());q.push(new I());q.push(new Z());q.push(new U());q.push(new h());this.$extraTabs.alignTabs("left");for(var r=0;r<q.length;++r){var o=q[r],p=o.$getLabel(),s=n(o.$getId()),t=k(this,"$onChangeTab");this.$extraTabs.addTab(p,{contentContainer:s,callback:t})}},$onRunAsScript:function(){var r=this.$textView.$getCurrentPanel().$getContent();var o="";var p=false;try{o=(function(){window.jsconsole=new T();return this.$eval(r)}).call(this)}catch(q){o=q.message||q.description||String(q);p=true}this.$invokeEvent("output",o,p);this.adjustHeight()},$onClearText:function(){var o=this.$textView.$getCurrentPanel();o.$setContent("");o.$save()},$onReplaceHTML:function(){this.$invokeEvent("html",this.$textView.$getCurrentPanel().$getContent());this.adjustHeight()},$onChangeTab:function(){this.adjustHeight()},$onSaveWarningDismissed:function(){this.$prefs.set("sm",0);A.adjustHeight();return true},adjustHeight:function(){_IG_AdjustIFrameHeight()},generateId:function(){return this.$prefix+"generatedId"+this.$nextId++},getModuleId:function(){return F},getPrefix:function(o){return this.$prefix+o},getPrefs:function(){return this.$prefs},getPrefValue:function(o){return this.$prefs.getString(this.$prefsMap[o]||o)},getPrefBool:function(o){return this.$prefs.getBool(this.$prefsMap[o]||o)},getMsg:function(o){return this.$prefs.getMsg(o)},getText:function(p){var o=this.$textView.$getPanel(p-1);return o?o.$getContent():""},getCurrentText:function(){return this.$textView.$getCurrentPanel().$getContent()},setCurrentText:function(o){this.$textView.$getCurrentPanel().$setContent(o)},log:function(o){this.$invokeEvent("log",o)},onStorageReady:function(){if(!Y){this.$flash=n(A.getPrefix("JsConsoleStorage"));this.$flash.open(this.$storageId);if(this.$textView){this.$textView.$forEach(function(o){o.$load()})}}},onStorageFlush:function(){if(Y){var p=this.$storage;for(var o in p){SocialGoodies.DataRequest.storeAppData("VIEWER",o,p[o])}}else{if(this.$flash){this.$flash.flush()}}},storageSetData:function(o,p){if(Y){this.$storage[o]=p;this.$storageHdl.invoke()}else{if(this.$flash){this.$flash.setData(o,p);this.$storageHdl.invoke()}}},storageGetData:function(o,p,q){if(Y){SocialGoodies.DataRequest.fetchAppData("VIEWER",o,{escape:"none",callback:function(s){for(var r in s){q.call(p,o,s[r][o]);break}}})}else{if(this.$flash){q.call(p,o,this.$flash.getData(o))}}},storageIsOk:function(){return this.$flash?this.$flash.isOk():Y},useLegacy:D,useOpenSocial:Y};if(window.Components){A.init()}else{_IG_RegisterOnloadHandler(function(){A.init()})}return A})();Gadget.$eval=function(text){return eval(text)};</script>

<div>
  <script type="text/javascript">
    if(Gadget.getPrefBool('saveText') && !Gadget.useOpenSocial)
    {
      document.open();
      if(window.ActiveXObject)
      {
        document.write([
          '<object id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage' + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="10" height="10">',
          '    <param name="src" value="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '" />',
          '    <param name="flashVars" value="prefix=' + 'Gadget.onStorage' + '" />',
          '</object>'].join('\n'));
      }
      else
      {
        document.write([
          '<embed',
          '    id="' + 'mod' + __MODULE_ID__ + 'JsConsoleStorage"',
          '    src="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '"',
          '    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"',
          '    width="10" height="10"',
          '    flashVars="prefix=' + 'Gadget.onStorage"'].join('\n'));
      }
      document.close();
    }
  </script>
</div>

<div style="clear:both;"></div>

    ]]>
  </Content>
</Module>
