<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
	 title="JavaScript Console"
	 directory_title="JavaScript Console"
	 title_url="http://webos-goodies.jp/"
	 description="__MSG_description__"
	 scrolling="false"
	 height="200"
	 screenshot="__MSG_screenshot__"
	 thumbnail="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/img/thumbnail.png"
	 author="WebOS Goodies"
	 author_email="support@webos-goodies.jp"
	 author_affiliation="WebOS Goodies"
	 author_location="Tokyo, Japan"
	 author_link="http://webos-goodies.jp/">
	<Icon>http://webos-goodies.jp/favicon.ico</Icon>
	<Require feature="setprefs" />
	<Require feature="settitle" />
	<Require feature="dynamic-height" />
	<Require feature="tabs" />
	<Require feature="minimessage" />
	<Require feature="analytics" />
	<Require feature="flash" />
	<Require feature="views" />
	<Require feature="skins" />
	<Require feature="opensocial-0.8" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ALL_ALL.xml" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ja_ALL.xml" lang="ja" />
  </ModulePrefs>
  <UserPref name="pr" datatype="hidden" default_value="1" /><!-- Preference revision -->
  <UserPref name="sm" datatype="hidden" default_value="1" /><!-- Show message about Save Text -->
  <UserPref name="sv" display_name="__MSG_prf_sav__" datatype="bool"   required="true" default_value="0" />
  <UserPref name="fs" display_name="__MSG_prf_fon__" datatype="string" required="true" default_value="12" />
  <UserPref name="tr" display_name="__MSG_prf_txt__" datatype="string" required="true" default_value="15" />
  <UserPref name="or" display_name="__MSG_prf_out__" datatype="string" required="true" default_value="8" />
  <UserPref name="lr" display_name="__MSG_prf_log__" datatype="string" required="true" default_value="8" />
  <UserPref name="gh" display_name="__MSG_prf_gad__" datatype="string" required="true" default_value="200" />
  <UserPref name="u1" display_name="__MSG_prf_usr__ 1" datatype="string" />
  <UserPref name="u2" display_name="__MSG_prf_usr__ 2" datatype="string" />
  <UserPref name="u3" display_name="__MSG_prf_usr__ 3" datatype="string" />
  <UserPref name="u4" display_name="__MSG_prf_usr__ 4" datatype="string" />

  <UserPref name="n000" datatype="hidden" default_value="1" />

  <Content type="html" view="home,profile,canvas">
	<![CDATA[

<style type="text/css">
  @import url(http://www.google.com/ig/tablib.css);
  .mmlib_table0 {
    __MSG_minimessage_style__
    padding:4px;
    margin:0px;
  }
  .mod0extraframe {
    border: 1px solid #676767;
    border-top-style: none;
    padding: 4px;
  }
</style>

<div id="mod0buttons"></div>
<div id="mod0extraview"></div>

<div style="font-size:10px;float:right;margin-top:4px;">
  <a target="_blank" href="http://webos-goodies.jp/">__MSG_blog__</a> |
  <a target="_blank" href="http://groups.google.com/group/webos-goodies">__MSG_support__</a>
</div>

<script type="text/javascript">
  var moduleId = 0;
  var platform = 'goo';
</script>

<script type="text/javascript">
  // You can get an unpacked version of the following script at http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/script.js
  var Gadget=(function(e){var A=document;var L=new _IG_Prefs(e);var d=!(window.gadgets&&gadgets.views&&gadgets.views.getCurrentView()!==undefined);var y=!d&&!!window.opensocial;var c=1;var p="border: 1px solid #676767; border-top-style: none; padding: 4px;";if(platform=="mixi"){L.set=function(){};L.getString=function(R){var Q={pr:"1",sm:"1",sv:"0",fs:"12",tr:"15",or:"8",lr:"8",gh:"200",u1:null,u2:null,u3:null,u4:null,n000:"1"};return Q[R]};L.getInt=function(Q){return parseInt(this.getString(Q),10)};L.getBool=function(Q){return parseInt(this.getString(Q),10)?true:false}}function F(Q){return Q===null}function n(Q){return typeof Q==="function"}function i(Q){return typeof Q==="string"}function M(Q,R){var S=Q[R];return function(){S.apply(Q,arguments)}}function E(Q,S){var U=Q[S];var R=[];for(var T=2;T<arguments.length;++T){R[R.length]=arguments[T]}return function(){U.apply(Q,R)}}function C(R,Q){R=parseInt(R,10);return isNaN(R)?Q:R}function b(U,T,S){for(var R=0,Q=U.length;R<Q;++R){T.call(S,U[R],R,U)}}function f(Q){return A.createElement(Q)}function G(){return A.createDocumentFragment()}function P(Q){return A.getElementById(Q)}function K(R){var Q=i(R)?P(R):R;return Q.textContent!==undefined?Q.textContent:Q.innerText}function j(T,R,Q){var S=f("div");S.id=T;S.style.cssText="display:none;"+(R||"");S.innerHTML=Q||"";A.body.appendChild(S);return S}function x(Q){Q=Q.replace(/&/g,"&amp;");Q=Q.replace(/</g,"&lt;").replace(/>/g,"&gt;");Q=Q.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");return Q}function N(Q){return(window.encodeURIComponent?encodeURIComponent(Q):escape(Q)).replace(/\%20/g,"+")}function H(Q){Q=Q.replace(/\+/g,"%20");return window.decodeURIComponent?decodeURIComponent(Q):unescape(Q)}function m(){return"JsConsole8395"+c++}function q(R,Q){return R.replace(/\$(\d+)/g,function(T,S){return Q[parseInt(S,10)]})}function o(){this._nodes={}}o.prototype={getEl:function(Q){return this._nodes[Q]},getElements:function(){var Q={};for(var R in this._nodes){Q[R]=this._nodes[R]}return Q},build:function(R,Q){this._nodes={};if(!Q){Q=R;R=null}if(!R){R=A.createDocumentFragment()}return this._build(R,Q)},_build:function(S,R){if(R instanceof Array){for(var U=0;U<R.length;++U){this._build(S,R[U])}}else{if(R.nodeType){S.appendChild(R)}else{var V=A.createElement(R.tag?R.tag:"DIV");var Q=V.setAttribute?true:false,W=null;for(var U in R){if(!R.hasOwnProperty(U)||typeof R[U]=="function"){continue}var T=R[U];switch(U){case"tag":case"html":break;case"cls":V.className=T;break;case"style":this.applyStyles(V,T);break;case"value":V[U]=T;break;case"index":this._nodes[T]=V;break;case"children":case"cn":W=T;break;default:if(Q){V.setAttribute(U,T)}else{V[U]=T}break}}if(W){this._build(V,W)}if(R.html){V.innerHTML+=R.html}S.appendChild(V)}}return S},applyStyles:function(R,S){if(typeof S==="string"){R.style.cssText=S}else{for(var Q in S){if(typeof S[Q]==="string"){R.style[Q]=S[Q]}}}}};SocialGoodies=(function(){var T=null,W=null,U=[],R=0;var X={fetchPerson:function(aa,ab){V(ab,function(ac,ad){T.add(T.newFetchPersonRequest(aa),ac);return{type:"fetchPerson",hasData:true}})},fetchPeople:function(aa,ab){V(ab,function(ac,ad){T.add(T.newFetchPeopleRequest(Q(aa)),ac);return{type:"fetchPeople",hasData:true}})},storeAppData:function(aa,ad,ac,ab){V(ab,function(ae,af){T.add(T.newUpdatePersonAppDataRequest(aa,ad,ac),ae);return{type:"storeAppData",hasData:false}})},fetchAppData:function(ab,aa,ac){V(ac,function(ad,ae){T.add(T.newFetchPersonAppDataRequest(Q(ab),aa,ae.params),ad);return{type:"fetchAppData",hasData:true}})},removeAppData:function(ab,aa,ac){V(ac,function(ad,ae){T.add(T.newRemovePersonAppDataRequest(ab,aa),ad);return{type:"removeAppData",hasData:false}})},send:function(){clearTimeout(W);W=null;Z()},Error:function(ad,ac,ab){var aa=this;aa.getErrorCode=function(){return ad||ac};aa.getErrorMessage=function(){return ac||ad};aa.isBatchLevelError=function(){return ab}}};function V(ad,ac){ad=ad||{};S();var ae={};if(ad.escape=="none"){ae[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]=opensocial.EscapeType.NONE}ad.params=ae;var ab=Y();var aa=ac(ab,ad||{});aa.key=ab;aa.callback=ad.callback;aa.scope=ad.scope;U.push(aa)}function Y(){return"uniqueKey"+R++}function S(){if(!T){T=opensocial.newDataRequest()}if(W===null){W=setTimeout(Z,0)}}function Q(aa){if(typeof aa=="string"){if(/^(.+)_FRIENDS$/.exec(aa)){aa=opensocial.newIdSpec({userId:RegExp.$1,groupId:"FRIENDS"})}else{aa=opensocial.newIdSpec({userId:aa,groupId:"SELF"})}}return aa}function Z(){var ab=T,aa=U;W=null;T=null;U=[];if(aa.length>0){ab.send(function(ae){if(!ae.hadError()){for(var ag=0,ad=aa.length;ag<ad;++ag){var ac=aa[ag];if(typeof ac.callback=="function"){var ah=ae.get(ac.key),ai=null,af=null;if(!ah||ah.hadError()){af=new X.Error(ah.getErrorCode(),ah.getErrorMessage(),false)}else{if(ac.hasData){ai=ah.getData()}}ac.callback.call(ac.scope,ai,af)}}}else{var af=new X.Error("",ae.getErrorMessage(),true);for(var ag=0,ad=aa.length;ag<ad;++ag){var ac=aa[ag];if(typeof ac.callback=="function"){ac.callback.call(ac.scope,null,af)}}}})}}return{DataRequest:X}})();function O(R,Q){this.$callback=R;this.$interval=Q;this.$timerId=null}O.prototype={invoke:function(){var Q=this;if(F(Q.$timerId)){clearTimeout(Q.$timerId)}Q.$timerId=setTimeout(Q.$callback,Q.$interval)}};var B=(function(){var S=0,U=null,Q=null;function T(W){return document.createElement(W)}function R(W){W=W.replace(/</g,"&lt;").replace(/>/g,"&gt;");W=W.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var X=T("div");X.innerHTML="<pre>"+W+"</pre>";return X.textContent!==undefined?X.textContent:X.innerText}function V(ab,ac){if(!(this instanceof V)){return new V(ab,ac)}var ag=this;ac=ac||{};var X=ac.previewName||"gadgetPreview"+S++,ad=ac.title||"no title",ah=parseInt(ac.width||320,10),Y=parseInt(ac.height||200,10),ae=ad,Z=ah,af=Y,aa=ac.border?1:0;if(!U){var W=T("DIV");Q=Q||T("TEXTAREA");U=T("FORM");Q.name="rawxml";U.method="POST";W.style.display="none";U.appendChild(Q);W.appendChild(U);document.body.appendChild(W)}ag.update=function(aj){var ai=this;var ak=aj.substring(0,aj.search(/<(?:UserPref|Content)/));ae=ak.match(/title="([^\u0022]*)"/)?R(RegExp.$1):ad;Z=ak.match(/width="(\d+)"/)?parseInt(RegExp.$1,10):ah;af=ak.match(/height="(\d+)"/)?parseInt(RegExp.$1,10):Y;try{delete window.frames[X]}catch(al){}document.getElementById(ab).innerHTML=['<iframe id="'+X+'" name="'+X+'"','src="about:blank" frameborder='+aa,"width="+Z,"height="+af,,"></iframe>"].join(" ");Q.value=aj;U.action=["http://www.gmodules.com/ig/ifr?","title="+(window.encodeURIComponent?encodeURIComponent:escape)(ae).replace(/%20/g,"+"),"w="+Z,"h="+af,"synd=open","nocache=1","output=html"].join("&");U.target=X;U.submit()};ag.getPreviewName=function(){return X};ag.getTitle=function(){return ae};ag.getWidth=function(){return Z};ag.getHeight=function(){return af};ag.getDefaultTitle=function(){return ad};ag.getDefaultWidth=function(){return ah};ag.getDefaultHeight=function(){return Y};ag=null}return V})();function t(V){V=V||{};var R=this,T=new _IG_Tabs(e,0,V.parentId?P(V.parentId):null),S=[],W=V.callback,U=V.scope;T.alignTabs("left");function Q(X){b(S,function(Y){if(Y.$getId()==X&&n(Y.$onActivate)){Y.$onActivate.call(Y)}});if(n(W)){W.call(U,X)}}R.$getPanel=function(X){return S[X]};R.$numPanels=function(X){return S.length};R.$forEach=function(Y,X){b(S,Y,X)};R.$getCurrentPanel=function(){var X=T.getSelectedTab();return X?S[X.getIndex()]:null};R.$addPanel=function(X){S.push(X);T.addTab(X.$getLabel(),{contentContainer:P(X.$getId()),callback:Q})};R=V=null}function s(R){var Q=m();this.$getId=function(){return Q};this.$getLabel=function(){return R};j(Q)}function I(S){var R=this,Q=m(),V=m(),U="text"+S,T=('<textarea id="$0" wrap="off" style="width:100%; height:$1em; font-size:$2px;"></textarea>');j(Q,"",q(T,[V,L.getInt("tr"),L.getInt("fs")]));R.$getId=function(){return Q};R.$getLabel=function(){return""+S};R.$getContent=function(){return P(V).value};R.$setContent=function(W){P(V).value=W};R.$save=function(){a.storageSetData(U,P(V).value)};R.$load=function(){a.storageGetData(U,this,function(W,X){if(X){this.$setContent(X)}})};P(V).onchange=E(R,"$save");R=null}function g(){var R=this,Q=m(),S=('<pre style="margin:0px; padding:0px; overflow:auto; font-size:$0px; max-height:$1em; $2">$3</pre>');j(Q,p);R.$getId=function(){return Q};R.$getLabel=function(){return a.getMsg("tab_out")};R.$setText=function(U,T){P(Q).innerHTML=q(S,[L.getInt("fs"),L.getInt("or"),T?"background-color:#ffaaaa":"",typeof U==="undefined"?a.getMsg("msg_out"):x(""+U)])};R.$setText();a.$addEventHandler("output",M(this,"$setText"));R=null}function h(){var R=this,Q=m(),S=m(),U=m(),T=('<div><textarea id="$0" wrap="off" readonly="true" style="width:100%; height:$1em; font-size:$2px;"></textarea></div><div style="text-align:right; marginTop:4px;"><input type="button" id="$3" value="$4" /></div>');j(Q,"",q(T,[S,L.getInt("lr"),L.getInt("fs"),U,a.getMsg("btn_clr")]));R.$getId=function(){return Q};R.$onClear=function(){P(S).value=""};R.$getLabel=function(){return a.getMsg("tab_log")};R.$log=function(V){P(S).value+=V};P(S).value=a.getMsg("msg_log");P(U).onclick=M(R,"$onClear");a.$addEventHandler("log",M(R,"$log"));R=null}function z(){var R=this,Q=m(),S='<div style="font-size:$0px;">$1</div>';j(Q,p);R.$getId=function(){return Q};R.$getLabel=function(){return a.getMsg("tab_htm")};R.$setHTML=function(T){P(Q).innerHTML=T||q(S,[L.getInt("fs"),a.getMsg("msg_htm")])};R.$setHTML();a.$addEventHandler("html",M(R,"$setHTML"))}function v(){var Y=this,V=m(),Q=m(),S=m(),U=null,X=('<div id="$0"></div><div style="margin:4px 0px; text-align:right;"><input id="$1" type="button" value="$2" /></div>');j(V,p,q(X,[Q,S,a.getMsg("btn_gad")]));var R=function(){var ai=this,ag=m(),aa=m(),ad=m(),ae=m(),ab=m(),Z=m(),aj="",af=a.getMsg("tab")+" ",ah=('<table style="width:98%;margin:0px;"><tr><td style="$0">$5</td><td colspan="3" style="$1"><input id="$6" type="text" style="$3" /></td></tr><tr><td style="$0">$7</td><td style="$2"><input id="$8" type="text" style="$3" /></td><td style="$0">$9</td><td style="$2"><input id="$10" type="text" style="$3" /></td></tr><tr><td style="$0">$11</td><td style="$2"><select id="$12" style="$4">$15</select></td><td style="$0">$13</td><td style="$2"><select id="$14" style="$4"><option value="0">----</option>$15</select></td></table>');for(var ac=1;ac<=5;++ac){aj+='<option value="'+ac+'">'+af+ac+"</option>"}j(ag,"",q(ah,["width:10%; text-align:right; font-size:12px; overflow:hidden;","width:89%;","width:39%;","width:100%;font-size:12px;","width:100%;font-size:12px;",a.getMsg("gad_ttl"),aa,a.getMsg("gad_wdt"),ad,a.getMsg("gad_hgt"),ae,a.getMsg("gad_htm"),ab,a.getMsg("gad_scp"),Z,aj]));ai.$getId=function(){return ag};ai.$getLabel=function(){return a.getMsg("tab_set")};ai.$getContent=function(){return{$title:P(aa).value,$width:C(P(ad).value,null),$height:C(P(ae).value,null),$html:a.getText(P(ab).value),$script:a.getText(P(Z).value)}};ai=null};var W=function(){var aa=this,Z=m();msgId=m();borderId=m();preview=null,X=('<div id="$0" style="font-size:$1px; margin-top: 4px;">$2</div><div id="$3" style="border:1px dotted #676767;margin:0px auto;overflow:auto;display:none;"></div>');j(Z,"",q(X,[msgId,L.getInt("fs"),a.getMsg("msg_gad"),borderId]));preview=new B(borderId,{height:L.getInt("gh")});aa.$getId=function(){return Z};aa.$getLabel=function(){return a.getMsg("tab_prv")};aa.$onActivate=function(){this.$centering()};aa.$centering=function(){var ab=P(borderId),ad=ab.parentNode.offsetWidth,ac=preview.getDefaultHeight();if(ad>0){ab.style.width=(_min(ad,preview.getWidth())+2)+"px";ab.style.height=(_min(ac,preview.getHeight())+2)+"px"}};aa.$update=function(ab){P(msgId).style.display="none";P(borderId).style.display="block";preview.update(ab)};aa=null};var T=function(){var aa=this,Z=m(),ac=m(),ab=('<textarea id="$0" wrap="off" readonly="true" style="width:100%; height:10em; font-size:$1px;"></textarea>');j(Z,"",q(ab,[ac,L.getInt("fs")]));aa.$getId=function(){return Z};aa.$getLabel=function(){return a.getMsg("tab_src")};aa.$setContent=function(ad){P(ac).value=ad};aa=null};Y.$onGenerate=function(){var Z=U.$getPanel(0).$getContent();if(Z.$title){Z.$title='\n      title="'+x(Z.$title)+'"'}else{Z.$title=""}if(Z.$width){Z.$width='\n      width="'+Z.$width+'"'}else{Z.$width=""}if(Z.$height){Z.$height='\n      height="'+Z.$height+'"'}else{Z.$height=""}if(Z.$script){Z.$script='\u003cscript type="text/javascript"\u003e\n'+Z.$script+"\n\u003c/script\u003e"}var aa=['<?xml version="1.0" encoding="UTF-8" ?>',"<Module>","  <ModulePrefs"+Z.$title+Z.$width+Z.$height+">",'    <Require feature="setprefs" />','    <Require feature="settitle" />','    <Require feature="dynamic-height" />','    <Require feature="tabs" />','    <Require feature="drag" />','    <Require feature="grid" />','    <Require feature="minimessage" />','    <Require feature="analytics" />','    <Require feature="flash" />',"  </ModulePrefs>",'  <Content type="html">',"    \u003c![CDATA[",Z.$html,Z.$script,"    ]]\u003e","  </Content>","</Module>"].join("\n");U.$getPanel(2).$setContent(aa);U.$getPanel(1).$update(aa);U.$getPanel(1).$centering();a.adjustHeight()};Y.$getId=function(){return V};Y.$getLabel=function(){return a.getMsg("tab_gad")};Y.$onChangeTab=function(){a.adjustHeight()};U=new t({parentId:Q,callback:M(Y,"$onChangeTab")});U.$addPanel(new R());U.$addPanel(new W());U.$addPanel(new T());P(S).onclick=M(Y,"$onGenerate");Y=null}function w(){s.call(this,a.getMsg("tol_hes"));this.$execute=function(){a.setCurrentText(x(a.getCurrentText()))}}function D(){s.call(this,a.getMsg("tol_hue"));this.$execute=function(){var Q=a.getCurrentText(),R=f("div");Q=Q.replace(/</g,"&lt;").replace(/>/g,"&gt;");Q=Q.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");R.innerHTML="<pre>"+Q+"</pre>";a.setCurrentText(K(R))}}function r(){s.call(this,a.getMsg("tol_ues"));this.$execute=function(){a.setCurrentText(N(a.getCurrentText()))}}function k(){s.call(this,a.getMsg("tol_uue"));this.$execute=function(){a.setCurrentText(H(a.getCurrentText()))}}function l(){var S=this,R=m(),W=m(),X=m(),Q=m(),V=m(),T=('<div id="$0">$1</div><div id="$2" style="display:none;"><div><a id="$3" href="#">$4</a></div><div style="margin-top:4px;"><div>$5</div><textarea id="$6" style="width:100%; height:5em; font-size:$7px;" readonly="true" wrap="soft"></textarea></div></div>');j(R,"margin-top: 4px; font-size:"+L.getInt("fs")+"px;",q(T,[W,a.getMsg("tol_bkm"),X,Q,a.getMsg("tol_bkc"),a.getMsg("tol_src"),V,L.getInt("fs")]));var U=new RegExp(["//.*","/\\*(?:[^*]|\\*(?!/))+\\*/","('|\")(?:[^\\\\\\1]|\\\\.)*?\\1","([^.)\\]$\\w\\s]\\s*)(/(?![/\\*])(?:[^\\\\/\\[]|\\\\.|\\[(?:[^\\\\\\]]|\\\\.)*\\])*?/)"].join("|"),"g");S.$getId=function(){return R};S.$getLabel=function(){return a.getMsg("tol_bkl")};S.$execute=function(){var Z=a.getCurrentText(),Y=[];Z=Z.replace(/\r\n?/g,"\n").replace(/\~/g,"~T");Z=Z.replace(/\+\+/g,"~P").replace(/\-\-/g,"~M");Z=Z.replace(U,function(ad,ac,ab,aa){if(ac){Y[Y.length]=ad;return"~S"}else{if(ab&&aa){Y[Y.length]=aa;return ab+"~S"}else{return""}}});Z=Z.replace(/\s+/g," ").replace(/^ +| +$/g,"");Z=Z.replace(/\~S/g,function(){return Y.shift()});Z=Z.replace(/\~P/g,"++").replace(/\~M/g,"--").replace(/\~T/g,"~");P(Q).href="javascript:(function(){"+Z+"})()";P(V).value=Z;P(W).style.display="none";P(X).style.display="block";a.adjustHeight()};S=null}function J(){var S=this,R=m(),Q=m(),X=m(),W=m(),U=[],T=[],V=('<div><select id="$0">$1</select><input id="$2" type="button" value="$3" style="margin-left:8px" /></div><div id="$4"></div>');U[0]=new w();U[1]=new D();U[2]=new r();U[3]=new k();U[4]=new l();b(U,function(Y,Z){T[Z]='<option value="'+Z+'">'+Y.$getLabel()+"</option>"});j(R,p,q(V,[Q,T.join(""),X,a.getMsg("tol_exe"),W]));b(U,function(Y,Z){P(W).appendChild(P(Y.$getId()))});S.$onExecute=function(){var Y=U[C(P(Q).value,0)];if(Y){Y.$execute()}};S.$onChange=function(){var Y=C(P(Q).value,0);b(U,function(Z,aa){P(Z.$getId()).style.display=(aa==Y?"block":"none")});a.adjustHeight()};S.$getId=function(){return R};S.$getLabel=function(){return a.getMsg("tab_tol")};P(X).onclick=M(S,"$onExecute");P(Q).onchange=M(S,"$onChange");S.$onChange();S=null}function u(){this.$prefix="\n----\n"}u.prototype={log:function(Q){a.log(this.$prefix+Q);this.$prefix=""},getPrefs:function(){return a.getPrefs()}};var a={$nextId:0,$prefs:L,$prefix:"mod"+e,$flash:null,$storageId:"mod"+e+"JsConsoleStorage",$storageHdl:null,$storage:{},$textView:null,$extraTabs:null,$extraPanels:[],$minimsg:null,$events:{output:[],log:[],html:[]},$prefsMap:{prefsVer:"pr",fontSize:"fs",textRows:"tr",maxOutputRows:"or",logRows:"lr",maxGadgetHeight:"gh",saveText:"sv"},$addEventHandler:function(R,Q){if(this.$events[R]){this.$events[R].push(Q)}},$invokeEvent:function(S){var Q=this.$events[S]||[],R=Array.prototype.slice.call(arguments,1);b(Q,function(T){T.apply(window,R)})},init:function(){this.$textView=new t();this.$minimsg=new _IG_MiniMessage(e);this.$storageHdl=new O(E(this,"onStorageFlush"),3000);if(this.$prefs.getBool("sv")&&!y){if(this.$prefs.getBool("sm")){var T=this.getMsg("msg_sav").replace(/_\_MODULE_ID__/,e).replace(/^\s+|\s+$/,"");this.$minimsg.createDismissibleMessage(T,M(this,"$onSaveWarningDismissed"))}}else{if(!this.$prefs.getBool("sm")){this.$prefs.set("sm",1)}}if(/synd=ig/.test(A.location)){for(var S=0;S<=0;++S){var R=this.$prefs;var Q=("00"+S).substr(-3);var T=(this.getMsg("notification"+Q)||"").replace(/_\_MODULE_ID__/,e);if(T&&R.getBool("n"+Q)){this.$minimsg.createDismissibleMessage(T,function(){R.set("n"+Q,"0");setTimeout(function(){_IG_AdjustIFrameHeight()},0);return true})}}}for(var S=0;S<5;++S){this.$textView.$addPanel(new I(S+1))}if(this.storageIsOk()){this.$textView.$forEach(function(U){U.$load()})}this.$initExtraViews();this.$initButtons();this.adjustHeight()},$initButtons:function(){var S=this;var R=new o();var Q=P(S.$prefix+"buttons");Q.style.margin="4px 0px";var T={marginRight:"8px"};R.build(Q,[{tag:"DIV",style:"float:right",cn:[{tag:"INPUT",index:"clr",type:"button",value:S.getMsg("btn_clr")}]},{tag:"DIV",cn:[{tag:"INPUT",index:"run",type:"button",value:S.getMsg("btn_run"),style:T},{tag:"INPUT",index:"htm",type:"button",value:S.getMsg("btn_htm"),style:T}]}]);R.getEl("run").onclick=M(S,"$onRunAsScript");R.getEl("htm").onclick=M(S,"$onReplaceHTML");R.getEl("clr").onclick=M(S,"$onClearText")},$initExtraViews:function(){var Q=this,R=this.$extraPanels;Q.$extraTabs=new _IG_Tabs(e,0,P(Q.$prefix+"extraview"));R.push(new g());R.push(new h());R.push(new z());if(platform!="google-calendar"){R.push(new v());R.push(new J())}Q.$extraTabs.alignTabs("left");b(R,function(S){var T=S.$getLabel(),U=P(S.$getId()),V=M(Q,"$onChangeTab");Q.$extraTabs.addTab(T,{contentContainer:U,callback:V})})},$onRunAsScript:function(){var T=this.$textView.$getCurrentPanel().$getContent();var Q="";var R=false;try{Q=(function(){window.jsconsole=new u();return this.$eval(T)}).call(this)}catch(S){Q=S.message||S.description||String(S);R=true}this.$invokeEvent("output",Q,R);this.adjustHeight()},$onClearText:function(){var Q=this.$textView.$getCurrentPanel();Q.$setContent("");Q.$save()},$onReplaceHTML:function(){this.$invokeEvent("html",this.$textView.$getCurrentPanel().$getContent());this.adjustHeight()},$onChangeTab:function(){this.adjustHeight()},$onSaveWarningDismissed:function(){this.$prefs.set("sm",0);a.adjustHeight();return true},adjustHeight:function(){_IG_AdjustIFrameHeight()},generateId:function(){return this.$prefix+"generatedId"+this.$nextId++},getModuleId:function(){return e},getPrefix:function(Q){return this.$prefix+Q},getPrefs:function(){return this.$prefs},getPrefValue:function(Q){return this.$prefs.getString(this.$prefsMap[Q]||Q)},getPrefBool:function(Q){return this.$prefs.getBool(this.$prefsMap[Q]||Q)},getMsg:function(R){try{return this.$prefs.getMsg(R)}catch(Q){return R}},getText:function(R){var Q=this.$textView.$getPanel(R-1);return Q?Q.$getContent():""},getCurrentText:function(){return this.$textView.$getCurrentPanel().$getContent()},setCurrentText:function(Q){this.$textView.$getCurrentPanel().$setContent(Q)},log:function(Q){this.$invokeEvent("log",Q)},onStorageReady:function(){if(!y){this.$flash=P(a.getPrefix("JsConsoleStorage"));this.$flash.open(this.$storageId);if(this.$textView){this.$textView.$forEach(function(Q){Q.$load()})}}},onStorageFlush:function(){if(y){var R=this.$storage;for(var Q in R){SocialGoodies.DataRequest.storeAppData("VIEWER",Q,R[Q])}}else{if(this.$flash){this.$flash.flush()}}},storageSetData:function(Q,R){if(y){this.$storage[Q]=R;this.$storageHdl.invoke()}else{if(this.$flash){this.$flash.setData(Q,R);this.$storageHdl.invoke()}}},storageGetData:function(Q,R,S){if(y){SocialGoodies.DataRequest.fetchAppData("VIEWER",Q,{escape:"none",callback:function(U){for(var T in U){S.call(R,Q,U[T][Q]);break}}})}else{if(this.$flash){S.call(R,Q,this.$flash.getData(Q))}}},storageIsOk:function(){return this.$flash?this.$flash.isOk():y},useLegacy:d,useOpenSocial:y};if(window.Components){a.init()}else{_IG_RegisterOnloadHandler(function(){a.init()})}return a})(moduleId);Gadget.$eval=function(text){return eval(text)};
</script>

<div>
  <script type="text/javascript">
    if(Gadget.getPrefBool('saveText') && !Gadget.useOpenSocial)
    {
      document.open();
      if(window.ActiveXObject)
      {
        document.write([
          '<object id="' + 'mod' + 0 + 'JsConsoleStorage' + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="10" height="10">',
          '    <param name="src" value="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '" />',
          '    <param name="flashVars" value="prefix=' + 'Gadget.onStorage' + '" />',
          '</object>'].join('\n'));
      }
      else
      {
        document.write([
          '<embed',
          '    id="' + 'mod' + 0 + 'JsConsoleStorage"',
          '    src="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '"',
          '    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"',
          '    width="10" height="10"',
          '    flashVars="prefix=' + 'Gadget.onStorage"'].join('\n'));
      }
      document.close();
    }
  </script>
</div>

<div style="clear:both;"></div>

    ]]>
  </Content>
</Module>
