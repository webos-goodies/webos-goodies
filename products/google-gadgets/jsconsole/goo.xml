<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
	 title="JavaScript Console"
	 directory_title="JavaScript Console"
	 title_url="http://webos-goodies.jp/"
	 description="__MSG_description__"
	 scrolling="false"
	 height="200"
	 screenshot="__MSG_screenshot__"
	 thumbnail="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/img/thumbnail.png"
	 author="WebOS Goodies"
	 author_email="support@webos-goodies.jp"
	 author_affiliation="WebOS Goodies"
	 author_location="Tokyo, Japan"
	 author_link="http://webos-goodies.jp/">
	<Require feature="setprefs" />
	<Require feature="settitle" />
	<Require feature="dynamic-height" />
	<Require feature="tabs" />
	<Require feature="minimessage" />
	<Require feature="analytics" />
	<Require feature="flash" />
	<Require feature="views" />
	<Require feature="skins" />
	<Require feature="opensocial-0.8" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ALL_ALL.xml" />
	<Locale messages="http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/locale/ja_ALL.xml" lang="ja" />
  </ModulePrefs>
  <UserPref name="pr" datatype="hidden" default_value="1" /><!-- Preference revision -->
  <UserPref name="sm" datatype="hidden" default_value="1" /><!-- Show message about Save Text -->
  <UserPref name="sv" display_name="__MSG_prf_sav__" datatype="bool"   required="true" default_value="0" />
  <UserPref name="fs" display_name="__MSG_prf_fon__" datatype="string" required="true" default_value="12" />
  <UserPref name="tr" display_name="__MSG_prf_txt__" datatype="string" required="true" default_value="15" />
  <UserPref name="or" display_name="__MSG_prf_out__" datatype="string" required="true" default_value="8" />
  <UserPref name="lr" display_name="__MSG_prf_log__" datatype="string" required="true" default_value="8" />
  <UserPref name="gh" display_name="__MSG_prf_gad__" datatype="string" required="true" default_value="200" />
  <UserPref name="u1" display_name="__MSG_prf_usr__ 1" datatype="string" />
  <UserPref name="u2" display_name="__MSG_prf_usr__ 2" datatype="string" />
  <UserPref name="u3" display_name="__MSG_prf_usr__ 3" datatype="string" />
  <UserPref name="u4" display_name="__MSG_prf_usr__ 4" datatype="string" />

  <UserPref name="n000" datatype="hidden" default_value="1" />

  <Content type="html" view="home">
	<![CDATA[

<style type="text/css">
  @import url(http://www.google.com/ig/tablib.css);
  .mmlib_table0 {
    __MSG_minimessage_style__
    padding:4px;
    margin:0px;
  }
  .mod0extraframe {
    border: 1px solid #676767;
    border-top-style: none;
    padding: 4px;
  }
</style>

<div id="mod0buttons"></div>
<div id="mod0extraview"></div>

<div style="font-size:10px;float:right;margin-top:4px;">
  <a target="_blank" href="http://webos-goodies.jp/">__MSG_blog__</a> |
  <a target="_blank" href="http://groups.google.com/group/webos-goodies">__MSG_support__</a>
</div>

<script type="text/javascript">var moduleId = 0;</script>

<script type="text/javascript">
  // You can get an unpacked version of the following script at http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/script.js
  var Gadget=(function(E){var a=document;var l=new _IG_Prefs(E);var D=!(window.gadgets&&gadgets.views&&gadgets.views.getCurrentView()!==undefined);var Y=!D&&!!window.opensocial;var C=1;var P="border: 1px solid #676767; border-top-style: none; padding: 4px;";function f(q){return q===null}function N(q){return typeof q==="function"}function I(q){return typeof q==="string"}function m(q,r){var s=q[r];return function(){s.apply(q,arguments)}}function e(q,s){var u=q[s];var r=[];for(var t=2;t<arguments.length;++t){r[r.length]=arguments[t]}return function(){u.apply(q,r)}}function c(r,q){r=parseInt(r,10);return isNaN(r)?q:r}function B(u,t,s){for(var r=0,q=u.length;r<q;++r){t.call(s,u[r],r,u)}}function F(q){return a.createElement(q)}function g(){return a.createDocumentFragment()}function p(q){return a.getElementById(q)}function k(r){var q=I(r)?p(r):r;return q.textContent!==undefined?q.textContent:q.innerText}function J(t,r,q){var s=F("div");s.id=t;s.style.cssText="display:none;"+(r||"");s.innerHTML=q||"";a.body.appendChild(s);return s}function X(q){q=q.replace(/&/g,"&amp;");q=q.replace(/</g,"&lt;").replace(/>/g,"&gt;");q=q.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");return q}function n(q){return(window.encodeURIComponent?encodeURIComponent(q):escape(q)).replace(/\%20/g,"+")}function h(q){q=q.replace(/\+/g,"%20");return window.decodeURIComponent?decodeURIComponent(q):unescape(q)}function M(){return"JsConsole8395"+C++}function Q(r,q){return r.replace(/\$(\d+)/g,function(t,s){return q[parseInt(s,10)]})}function O(){this._nodes={}}O.prototype={getEl:function(q){return this._nodes[q]},getElements:function(){var q={};for(var r in this._nodes){q[r]=this._nodes[r]}return q},build:function(r,q){this._nodes={};if(!q){q=r;r=null}if(!r){r=a.createDocumentFragment()}return this._build(r,q)},_build:function(s,r){if(r instanceof Array){for(var u=0;u<r.length;++u){this._build(s,r[u])}}else{if(r.nodeType){s.appendChild(r)}else{var w=a.createElement(r.tag?r.tag:"DIV");var q=w.setAttribute?true:false,x=null;for(var u in r){if(!r.hasOwnProperty(u)||typeof r[u]=="function"){continue}var t=r[u];switch(u){case"tag":case"html":break;case"cls":w.className=t;break;case"style":this.applyStyles(w,t);break;case"value":w[u]=t;break;case"index":this._nodes[t]=w;break;case"children":case"cn":x=t;break;default:if(q){w.setAttribute(u,t)}else{w[u]=t}break}}if(x){this._build(w,x)}if(r.html){w.innerHTML+=r.html}s.appendChild(w)}}return s},applyStyles:function(r,s){if(typeof s==="string"){r.style.cssText=s}else{for(var q in s){if(typeof s[q]==="string"){r.style[q]=s[q]}}}}};SocialGoodies=(function(){var t=null,w=null,u=[],r=0;var x={fetchPerson:function(AA,AB){v(AB,function(AC,AD){t.add(t.newFetchPersonRequest(AA),AC);return{type:"fetchPerson",hasData:true}})},fetchPeople:function(AA,AB){v(AB,function(AC,AD){t.add(t.newFetchPeopleRequest(q(AA)),AC);return{type:"fetchPeople",hasData:true}})},storeAppData:function(AA,AD,AC,AB){v(AB,function(AE,AF){t.add(t.newUpdatePersonAppDataRequest(AA,AD,AC),AE);return{type:"storeAppData",hasData:false}})},fetchAppData:function(AB,AA,AC){v(AC,function(AD,AE){t.add(t.newFetchPersonAppDataRequest(q(AB),AA,AE.params),AD);return{type:"fetchAppData",hasData:true}})},removeAppData:function(AB,AA,AC){v(AC,function(AD,AE){t.add(t.newRemovePersonAppDataRequest(AB,AA),AD);return{type:"removeAppData",hasData:false}})},send:function(){clearTimeout(w);w=null;z()},Error:function(AD,AC,AB){var AA=this;AA.getErrorCode=function(){return AD||AC};AA.getErrorMessage=function(){return AC||AD};AA.isBatchLevelError=function(){return AB}}};function v(AD,AC){AD=AD||{};s();var AE={};if(AD.escape=="none"){AE[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]=opensocial.EscapeType.NONE}AD.params=AE;var AB=y();var AA=AC(AB,AD||{});AA.key=AB;AA.callback=AD.callback;AA.scope=AD.scope;u.push(AA)}function y(){return"uniqueKey"+r++}function s(){if(!t){t=opensocial.newDataRequest()}if(w===null){w=setTimeout(z,0)}}function q(AA){if(typeof AA=="string"){if(/^(.+)_FRIENDS$/.exec(AA)){AA=opensocial.newIdSpec({userId:RegExp.$1,groupId:"FRIENDS"})}else{AA=opensocial.newIdSpec({userId:AA,groupId:"SELF"})}}return AA}function z(){var AB=t,AA=u;w=null;t=null;u=[];if(AA.length>0){AB.send(function(AE){if(!AE.hadError()){for(var AG=0,AD=AA.length;AG<AD;++AG){var AC=AA[AG];if(typeof AC.callback=="function"){var AH=AE.get(AC.key),AI=null,AF=null;if(!AH||AH.hadError()){AF=new x.Error(AH.getErrorCode(),AH.getErrorMessage(),false)}else{if(AC.hasData){AI=AH.getData()}}AC.callback.call(AC.scope,AI,AF)}}}else{var AF=new x.Error("",AE.getErrorMessage(),true);for(var AG=0,AD=AA.length;AG<AD;++AG){var AC=AA[AG];if(typeof AE.callback=="function"){AC.callback.call(AC.scope,null,AF)}}}})}}return{DataRequest:x}})();function o(r,q){this.$callback=r;this.$interval=q;this.$timerId=null}o.prototype={invoke:function(){var q=this;if(f(q.$timerId)){clearTimeout(q.$timerId)}q.$timerId=setTimeout(q.$callback,q.$interval)}};var b=(function(){var s=0,u=null,q=null;function t(w){return document.createElement(w)}function r(w){w=w.replace(/</g,"&lt;").replace(/>/g,"&gt;");w=w.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");var x=t("div");x.innerHTML="<pre>"+w+"</pre>";return x.textContent!==undefined?x.textContent:x.innerText}function v(AB,AC){if(!(this instanceof v)){return new v(AB,AC)}var AG=this;AC=AC||{};var x=AC.previewName||"gadgetPreview"+s++,AD=AC.title||"no title",AH=parseInt(AC.width||320,10),y=parseInt(AC.height||200,10),AE=AD,z=AH,AF=y,AA=AC.border?1:0;if(!u){var w=t("DIV");q=q||t("TEXTAREA");u=t("FORM");q.name="rawxml";u.method="POST";w.style.display="none";u.appendChild(q);w.appendChild(u);document.body.appendChild(w)}AG.update=function(AJ){var AI=this;var AK=AJ.substring(0,AJ.search(/<(?:UserPref|Content)/));AE=AK.match(/title="([^\u0022]*)"/)?r(RegExp.$1):AD;z=AK.match(/width="(\d+)"/)?parseInt(RegExp.$1,10):AH;AF=AK.match(/height="(\d+)"/)?parseInt(RegExp.$1,10):y;try{delete window.frames[x]}catch(AL){}document.getElementById(AB).innerHTML=['<iframe id="'+x+'" name="'+x+'"','src="about:blank" frameborder='+AA,"width="+z,"height="+AF,,"></iframe>"].join(" ");q.value=AJ;u.action=["http://www.gmodules.com/ig/ifr?","title="+(window.encodeURIComponent?encodeURIComponent:escape)(AE).replace(/%20/g,"+"),"w="+z,"h="+AF,"synd=open","nocache=1","output=html"].join("&");u.target=x;u.submit()};AG.getPreviewName=function(){return x};AG.getTitle=function(){return AE};AG.getWidth=function(){return z};AG.getHeight=function(){return AF};AG.getDefaultTitle=function(){return AD};AG.getDefaultWidth=function(){return AH};AG.getDefaultHeight=function(){return y};AG=null}return v})();function T(v){v=v||{};var r=this,t=new _IG_Tabs(E,0,v.parentId?p(v.parentId):null),s=[],w=v.callback,u=v.scope;t.alignTabs("left");function q(x){B(s,function(y){if(y.$getId()==x&&N(y.$onActivate)){y.$onActivate.call(y)}});if(N(w)){w.call(u,x)}}r.$getPanel=function(x){return s[x]};r.$numPanels=function(x){return s.length};r.$forEach=function(y,x){B(s,y,x)};r.$getCurrentPanel=function(){var x=t.getSelectedTab();return x?s[x.getIndex()]:null};r.$addPanel=function(x){s.push(x);t.addTab(x.$getLabel(),{contentContainer:p(x.$getId()),callback:q})};r=v=null}function S(r){var q=M();this.$getId=function(){return q};this.$getLabel=function(){return r};J(q)}function i(s){var r=this,q=M(),v=M(),u="text"+s,t=('<textarea id="$0" wrap="off" style="width:100%; height:$1em; font-size:$2px;"></textarea>');J(q,"",Q(t,[v,l.getInt("tr"),l.getInt("fs")]));r.$getId=function(){return q};r.$getLabel=function(){return""+s};r.$getContent=function(){return p(v).value};r.$setContent=function(w){p(v).value=w};r.$save=function(){A.storageSetData(u,p(v).value)};r.$load=function(){A.storageGetData(u,this,function(w,x){if(x){this.$setContent(x)}})};p(v).onchange=e(r,"$save");r=null}function G(){var r=this,q=M(),s=('<pre style="margin:0px; padding:0px; overflow:auto; font-size:$0px; max-height:$1em; $2">$3</pre>');J(q,P);r.$getId=function(){return q};r.$getLabel=function(){return A.getMsg("tab_out")};r.$setText=function(u,t){p(q).innerHTML=Q(s,[l.getInt("fs"),l.getInt("or"),t?"background-color:#ffaaaa":"",typeof u==="undefined"?A.getMsg("msg_out"):X(""+u)])};r.$setText();A.$addEventHandler("output",m(this,"$setText"));r=null}function H(){var r=this,q=M(),s=M(),u=M(),t=('<div><textarea id="$0" wrap="off" readonly="true" style="width:100%; height:$1em; font-size:$2px;"></textarea></div><div style="text-align:right; marginTop:4px;"><input type="button" id="$3" value="$4" /></div>');J(q,"",Q(t,[s,l.getInt("lr"),l.getInt("fs"),u,A.getMsg("btn_clr")]));r.$getId=function(){return q};r.$onClear=function(){p(s).value=""};r.$getLabel=function(){return A.getMsg("tab_log")};r.$log=function(v){p(s).value+=v};p(s).value=A.getMsg("msg_log");p(u).onclick=m(r,"$onClear");A.$addEventHandler("log",m(r,"$log"));r=null}function Z(){var r=this,q=M(),s='<div style="font-size:$0px;">$1</div>';J(q,P);r.$getId=function(){return q};r.$getLabel=function(){return A.getMsg("tab_htm")};r.$setHTML=function(t){p(q).innerHTML=t||Q(s,[l.getInt("fs"),A.getMsg("msg_htm")])};r.$setHTML();A.$addEventHandler("html",m(r,"$setHTML"))}function V(){var y=this,v=M(),q=M(),s=M(),u=null,x=('<div id="$0"></div><div style="margin:4px 0px; text-align:right;"><input id="$1" type="button" value="$2" /></div>');J(v,P,Q(x,[q,s,A.getMsg("btn_gad")]));var r=function(){var AI=this,AG=M(),AA=M(),AD=M(),AE=M(),AB=M(),z=M(),AJ="",AF=A.getMsg("tab")+" ",AH=('<table style="width:98%;margin:0px;"><tr><td style="$0">$5</td><td colspan="3" style="$1"><input id="$6" type="text" style="$3" /></td></tr><tr><td style="$0">$7</td><td style="$2"><input id="$8" type="text" style="$3" /></td><td style="$0">$9</td><td style="$2"><input id="$10" type="text" style="$3" /></td></tr><tr><td style="$0">$11</td><td style="$2"><select id="$12" style="$4">$15</select></td><td style="$0">$13</td><td style="$2"><select id="$14" style="$4"><option value="0">----</option>$15</select></td></table>');for(var AC=1;AC<=5;++AC){AJ+='<option value="'+AC+'">'+AF+AC+"</option>"}J(AG,"",Q(AH,["width:10%; text-align:right; font-size:12px; overflow:hidden;","width:89%;","width:39%;","width:100%;font-size:12px;","width:100%;font-size:12px;",A.getMsg("gad_ttl"),AA,A.getMsg("gad_wdt"),AD,A.getMsg("gad_hgt"),AE,A.getMsg("gad_htm"),AB,A.getMsg("gad_scp"),z,AJ]));AI.$getId=function(){return AG};AI.$getLabel=function(){return A.getMsg("tab_set")};AI.$getContent=function(){return{$title:p(AA).value,$width:c(p(AD).value,null),$height:c(p(AE).value,null),$html:A.getText(p(AB).value),$script:A.getText(p(z).value)}};AI=null};var w=function(){var AA=this,z=M();msgId=M();borderId=M();preview=null,x=('<div id="$0" style="font-size:$1px; margin-top: 4px;">$2</div><div id="$3" style="border:1px dotted #676767;margin:0px auto;overflow:auto;display:none;"></div>');J(z,"",Q(x,[msgId,l.getInt("fs"),A.getMsg("msg_gad"),borderId]));preview=new b(borderId,{height:l.getInt("gh")});AA.$getId=function(){return z};AA.$getLabel=function(){return A.getMsg("tab_prv")};AA.$onActivate=function(){this.$centering()};AA.$centering=function(){var AB=p(borderId),AD=AB.parentNode.offsetWidth,AC=preview.getDefaultHeight();if(AD>0){AB.style.width=(_min(AD,preview.getWidth())+2)+"px";AB.style.height=(_min(AC,preview.getHeight())+2)+"px"}};AA.$update=function(AB){p(msgId).style.display="none";p(borderId).style.display="block";preview.update(AB)};AA=null};var t=function(){var AA=this,z=M(),AC=M(),AB=('<textarea id="$0" wrap="off" readonly="true" style="width:100%; height:10em; font-size:$1px;"></textarea>');J(z,"",Q(AB,[AC,l.getInt("fs")]));AA.$getId=function(){return z};AA.$getLabel=function(){return A.getMsg("tab_src")};AA.$setContent=function(AD){p(AC).value=AD};AA=null};y.$onGenerate=function(){var z=u.$getPanel(0).$getContent();if(z.$title){z.$title='\n      title="'+X(z.$title)+'"'}else{z.$title=""}if(z.$width){z.$width='\n      width="'+z.$width+'"'}else{z.$width=""}if(z.$height){z.$height='\n      height="'+z.$height+'"'}else{z.$height=""}if(z.$script){z.$script='\u003cscript type="text/javascript"\u003e\n'+z.$script+"\n\u003c/script\u003e"}var AA=['<?xml version="1.0" encoding="UTF-8" ?>',"<Module>","  <ModulePrefs"+z.$title+z.$width+z.$height+">",'    <Require feature="setprefs" />','    <Require feature="settitle" />','    <Require feature="dynamic-height" />','    <Require feature="tabs" />','    <Require feature="drag" />','    <Require feature="grid" />','    <Require feature="minimessage" />','    <Require feature="analytics" />','    <Require feature="flash" />',"  </ModulePrefs>",'  <Content type="html">',"    \u003c![CDATA[",z.$html,z.$script,"    ]]\u003e","  </Content>","</Module>"].join("\n");u.$getPanel(2).$setContent(AA);u.$getPanel(1).$update(AA);u.$getPanel(1).$centering();A.adjustHeight()};y.$getId=function(){return v};y.$getLabel=function(){return A.getMsg("tab_gad")};y.$onChangeTab=function(){A.adjustHeight()};u=new T({parentId:q,callback:m(y,"$onChangeTab")});u.$addPanel(new r());u.$addPanel(new w());u.$addPanel(new t());p(s).onclick=m(y,"$onGenerate");y=null}function W(){S.call(this,A.getMsg("tol_hes"));this.$execute=function(){A.setCurrentText(X(A.getCurrentText()))}}function d(){S.call(this,A.getMsg("tol_hue"));this.$execute=function(){var q=A.getCurrentText(),r=F("div");q=q.replace(/</g,"&lt;").replace(/>/g,"&gt;");q=q.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;");r.innerHTML="<pre>"+q+"</pre>";A.setCurrentText(k(r))}}function R(){S.call(this,A.getMsg("tol_ues"));this.$execute=function(){A.setCurrentText(n(A.getCurrentText()))}}function K(){S.call(this,A.getMsg("tol_uue"));this.$execute=function(){A.setCurrentText(h(A.getCurrentText()))}}function L(){var s=this,r=M(),w=M(),x=M(),q=M(),v=M(),t=('<div id="$0">$1</div><div id="$2" style="display:none;"><div><a id="$3" href="#">$4</a></div><div style="margin-top:4px;"><div>$5</div><textarea id="$6" style="width:100%; height:5em; font-size:$7px;" readonly="true" wrap="soft"></textarea></div></div>');J(r,"margin-top: 4px; font-size:"+l.getInt("fs")+"px;",Q(t,[w,A.getMsg("tol_bkm"),x,q,A.getMsg("tol_bkc"),A.getMsg("tol_src"),v,l.getInt("fs")]));var u=new RegExp(["//.*","/\\*(?:[^*]|\\*(?!/))+\\*/","('|\")(?:[^\\\\\\1]|\\\\.)*?\\1","([^.)\\]$\\w\\s]\\s*)(/(?![/\\*])(?:[^\\\\/\\[]|\\\\.|\\[(?:[^\\\\\\]]|\\\\.)*\\])*?/)"].join("|"),"g");s.$getId=function(){return r};s.$getLabel=function(){return A.getMsg("tol_bkl")};s.$execute=function(){var z=A.getCurrentText(),y=[];z=z.replace(/\r\n?/g,"\n").replace(/\~/g,"~T");z=z.replace(/\+\+/g,"~P").replace(/\-\-/g,"~M");z=z.replace(u,function(AD,AC,AB,AA){if(AC){y[y.length]=AD;return"~S"}else{if(AB&&AA){y[y.length]=AA;return AB+"~S"}else{return""}}});z=z.replace(/\s+/g," ").replace(/^ +| +$/g,"");z=z.replace(/\~S/g,function(){return y.shift()});z=z.replace(/\~P/g,"++").replace(/\~M/g,"--").replace(/\~T/g,"~");p(q).href="javascript:(function(){"+z+"})()";p(v).value=z;p(w).style.display="none";p(x).style.display="block";A.adjustHeight()};s=null}function j(){var s=this,r=M(),q=M(),x=M(),w=M(),u=[],t=[],v=('<div><select id="$0">$1</select><input id="$2" type="button" value="$3" style="margin-left:8px" /></div><div id="$4"></div>');u[0]=new W();u[1]=new d();u[2]=new R();u[3]=new K();u[4]=new L();B(u,function(y,z){t[z]='<option value="'+z+'">'+y.$getLabel()+"</option>"});J(r,P,Q(v,[q,t.join(""),x,A.getMsg("tol_exe"),w]));B(u,function(y,z){p(w).appendChild(p(y.$getId()))});s.$onExecute=function(){var y=u[c(p(q).value,0)];if(y){y.$execute()}};s.$onChange=function(){var y=c(p(q).value,0);B(u,function(z,AA){p(z.$getId()).style.display=(AA==y?"block":"none")});A.adjustHeight()};s.$getId=function(){return r};s.$getLabel=function(){return A.getMsg("tab_tol")};p(x).onclick=m(s,"$onExecute");p(q).onchange=m(s,"$onChange");s.$onChange();s=null}function U(){this.$prefix="\n----\n"}U.prototype={log:function(q){A.log(this.$prefix+q);this.$prefix=""},getPrefs:function(){return A.getPrefs()}};var A={$nextId:0,$prefs:l,$prefix:"mod"+E,$flash:null,$storageId:"mod"+E+"JsConsoleStorage",$storageHdl:null,$storage:{},$textView:null,$extraTabs:null,$extraPanels:[],$minimsg:null,$events:{output:[],log:[],html:[]},$prefsMap:{prefsVer:"pr",fontSize:"fs",textRows:"tr",maxOutputRows:"or",logRows:"lr",maxGadgetHeight:"gh",saveText:"sv"},$addEventHandler:function(r,q){if(this.$events[r]){this.$events[r].push(q)}},$invokeEvent:function(s){var q=this.$events[s]||[],r=Array.prototype.slice.call(arguments,1);B(q,function(t){t.apply(window,r)})},init:function(){this.$textView=new T();this.$minimsg=new _IG_MiniMessage(E);this.$storageHdl=new o(e(this,"onStorageFlush"),3000);if(this.$prefs.getBool("sv")&&!Y){if(this.$prefs.getBool("sm")){var t=this.getMsg("msg_sav").replace(/_\_MODULE_ID__/,E).replace(/^\s+|\s+$/,"");this.$minimsg.createDismissibleMessage(t,m(this,"$onSaveWarningDismissed"))}}else{if(!this.$prefs.getBool("sm")){this.$prefs.set("sm",1)}}if(/synd=ig/.test(a.location)){for(var s=0;s<=0;++s){var r=this.$prefs;var q=("00"+s).substr(-3);var t=(this.getMsg("notification"+q)||"").replace(/_\_MODULE_ID__/,E);if(t&&r.getBool("n"+q)){this.$minimsg.createDismissibleMessage(t,function(){r.set("n"+q,"0");setTimeout(function(){_IG_AdjustIFrameHeight()},0);return true})}}}for(var s=0;s<5;++s){this.$textView.$addPanel(new i(s+1))}if(this.storageIsOk()){this.$textView.$forEach(function(u){u.$load()})}this.$initExtraViews();this.$initButtons();this.adjustHeight()},$initButtons:function(){var s=this;var r=new O();var q=p(s.$prefix+"buttons");q.style.margin="4px 0px";var t={marginRight:"8px"};r.build(q,[{tag:"DIV",style:"float:right",cn:[{tag:"INPUT",index:"clr",type:"button",value:s.getMsg("btn_clr")}]},{tag:"DIV",cn:[{tag:"INPUT",index:"run",type:"button",value:s.getMsg("btn_run"),style:t},{tag:"INPUT",index:"htm",type:"button",value:s.getMsg("btn_htm"),style:t}]}]);r.getEl("run").onclick=m(s,"$onRunAsScript");r.getEl("htm").onclick=m(s,"$onReplaceHTML");r.getEl("clr").onclick=m(s,"$onClearText")},$initExtraViews:function(){var q=this,r=this.$extraPanels;q.$extraTabs=new _IG_Tabs(E,0,p(q.$prefix+"extraview"));r.push(new G());r.push(new H());r.push(new Z());r.push(new V());r.push(new j());q.$extraTabs.alignTabs("left");B(r,function(s){var t=s.$getLabel(),u=p(s.$getId()),v=m(q,"$onChangeTab");q.$extraTabs.addTab(t,{contentContainer:u,callback:v})})},$onRunAsScript:function(){var t=this.$textView.$getCurrentPanel().$getContent();var q="";var r=false;try{q=(function(){window.jsconsole=new U();return this.$eval(t)}).call(this)}catch(s){q=s.message||s.description||String(s);r=true}this.$invokeEvent("output",q,r);this.adjustHeight()},$onClearText:function(){var q=this.$textView.$getCurrentPanel();q.$setContent("");q.$save()},$onReplaceHTML:function(){this.$invokeEvent("html",this.$textView.$getCurrentPanel().$getContent());this.adjustHeight()},$onChangeTab:function(){this.adjustHeight()},$onSaveWarningDismissed:function(){this.$prefs.set("sm",0);A.adjustHeight();return true},adjustHeight:function(){_IG_AdjustIFrameHeight()},generateId:function(){return this.$prefix+"generatedId"+this.$nextId++},getModuleId:function(){return E},getPrefix:function(q){return this.$prefix+q},getPrefs:function(){return this.$prefs},getPrefValue:function(q){return this.$prefs.getString(this.$prefsMap[q]||q)},getPrefBool:function(q){return this.$prefs.getBool(this.$prefsMap[q]||q)},getMsg:function(r){try{return this.$prefs.getMsg(r)}catch(q){return r}},getText:function(r){var q=this.$textView.$getPanel(r-1);return q?q.$getContent():""},getCurrentText:function(){return this.$textView.$getCurrentPanel().$getContent()},setCurrentText:function(q){this.$textView.$getCurrentPanel().$setContent(q)},log:function(q){this.$invokeEvent("log",q)},onStorageReady:function(){if(!Y){this.$flash=p(A.getPrefix("JsConsoleStorage"));this.$flash.open(this.$storageId);if(this.$textView){this.$textView.$forEach(function(q){q.$load()})}}},onStorageFlush:function(){if(Y){var r=this.$storage;for(var q in r){SocialGoodies.DataRequest.storeAppData("VIEWER",q,r[q])}}else{if(this.$flash){this.$flash.flush()}}},storageSetData:function(q,r){if(Y){this.$storage[q]=r;this.$storageHdl.invoke()}else{if(this.$flash){this.$flash.setData(q,r);this.$storageHdl.invoke()}}},storageGetData:function(q,r,s){if(Y){SocialGoodies.DataRequest.fetchAppData("VIEWER",q,{escape:"none",callback:function(u){for(var t in u){s.call(r,q,u[t][q]);break}}})}else{if(this.$flash){s.call(r,q,this.$flash.getData(q))}}},storageIsOk:function(){return this.$flash?this.$flash.isOk():Y},useLegacy:D,useOpenSocial:Y};if(window.Components){A.init()}else{_IG_RegisterOnloadHandler(function(){A.init()})}return A})(moduleId);Gadget.$eval=function(text){return eval(text)};
</script>

<div>
  <script type="text/javascript">
    if(Gadget.getPrefBool('saveText') && !Gadget.useOpenSocial)
    {
      document.open();
      if(window.ActiveXObject)
      {
        document.write([
          '<object id="' + 'mod' + 0 + 'JsConsoleStorage' + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="10" height="10">',
          '    <param name="src" value="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '" />',
          '    <param name="flashVars" value="prefix=' + 'Gadget.onStorage' + '" />',
          '</object>'].join('\n'));
      }
      else
      {
        document.write([
          '<embed',
          '    id="' + 'mod' + 0 + 'JsConsoleStorage"',
          '    src="' + _IG_GetCachedUrl('http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/jsconsole/flash/FlashStorage.swf') + '"',
          '    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"',
          '    width="10" height="10"',
          '    flashVars="prefix=' + 'Gadget.onStorage"'].join('\n'));
      }
      document.close();
    }
  </script>
</div>

<div style="clear:both;"></div>

    ]]>
  </Content>
</Module>
