<?xml version="1.0" encoding="UTF-8" ?>
<ApplicationManifest xmlns="http://schemas.google.com/ApplicationManifest/2009">

  <!-- マーケットプレイスやコントロールパネルに表示されるサポート情報 -->
  <Support>
    <!-- カスタマーサポートのURL -->
    <Link rel="support" href="http://example.com/google/support.php" />
  </Support>

  <!-- アプリケーション名と説明 -->
  <Name>Gmail Map Preview</Name>
  <Description>Show Google Maps preview.</Description>

<!-- Extractorとフィルターの情報 -->
<Extension id="MapLinkExtractor" type="contextExtractor">

  <!-- 人間が読める名前 -->
  <Name>Gmail Map Preview</Name>

  <!-- 使用するExtractor -->
  <Url>google.com:HttpLinkExtractor</Url>

  <!-- フィルター -->
  <Param name="host" value="maps\.google\.(com|co\.jp)"/>

  <!-- 表示するガジェット（ref属性はExtensionタグのid） -->
  <Triggers ref="MapPreviewGadget"/>

  <!-- 必要なスコープ（ref属性はScopeタグのid） -->
  <Scope ref="emailSubject"/>
  <Scope ref="emailBody"/>

  <!-- 対象のアプリケーション？ -->
  <Container name="mail"/>
</Extension>

<!-- ガジェットの情報 -->
<Extension id="HelloWorldGadget" type="gadget">

  <!-- ガジェットの名前 -->
  <Name>Gmail Map Preview</Name>

  <!-- ガジェットXMLのURL -->
  <Url>http://webos-goodies.googlecode.com/svn/trunk/products/google-gadgets/gmail-map-preview/gmail-map-preview.xml</Url>

  <!-- 対象のアプリケーション？ -->
  <Container name="mail"/>
</Extension>

<!-- スコープ（このアプリケーションが必要な権限） -->
<Scope id="emailSubject">
  <Url>tag:google.com,2010:auth/contextual/extractor/SUBJECT</Url>
  <Reason>This application searches the Subject: line of each email for the link to Google Maps</Reason>
</Scope>

<Scope id="emailBody">
  <Url>tag:google.com,2010:auth/contextual/extractor/BODY</Url>
  <Reason>This application searches the message body of each email for the link to Google Maps</Reason>
</Scope>

</ApplicationManifest>
